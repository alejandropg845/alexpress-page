import{a as W,b as vt,c as bt,d as yt}from"./chunk-MA7KAMFL.js";import{$ as d,$a as le,B as st,Ca as ke,D as E,Da as xt,E as s,Ea as Z,F as g,Fa as z,Ga as Ee,Ha as gt,I as x,Ia as $,J as Ze,K as c,L as N,M as xe,N as ee,O,P as F,Q as T,Qa as R,R as n,S as o,Sa as Ue,T as p,Ta as L,U as C,Ua as ne,V as f,Va as b,W as m,Wa as oe,X as lt,Xa as ae,Y as dt,Z as ct,Za as se,_ as B,_a as Ae,a as Ne,aa as _,ab as Be,ba as w,bb as de,c as K,cb as Re,d as U,db as qe,e as ve,eb as ze,fa as A,fb as ce,g as we,ga as y,gb as pe,h as ot,ha as te,i as Ie,ia as pt,ib as ht,j as Le,ja as H,jb as me,ka as Q,kb as We,l as be,la as re,lb as _t,m as _e,n as I,na as mt,oa as q,pa as ut,q as fe,qa as V,r as ye,ra as Ce,s as Ge,sa as ft,t as Ye,ta as Oe,u as k,ua as $e,v as Se,va as Me,w as at,x as h,y as v}from"./chunk-CGZ54FQP.js";var St=(()=>{let l=class l{setLength(t,r){this.textareaValue=t.value.length,this.textareaValue>200?r.classList.add("text-red-600"):r.classList.remove("text-red-600")}getCurrentUserCredentials(){this.token&&(this.dataSubscription$=this.authService.getCurrentUserCredentials().subscribe(t=>this.userCredentials=t))}requestSupport(t){if(t.value.length<30||t.value.length>200){this.toastr.info("Please, type within 30 and 200 characters in your help request");return}if(!this.token){this.toastr.info("Log in to do this action");return}this.dataSubscription$=this.authService.sendSupportEmail(this.userCredentials.email,this.userCredentials.username,t.value).subscribe({next:r=>{this.toastr.success(r.message),t.value=""},error:r=>{if(r.status===401){this.toastr.error("User is not logged in");return}$(r,this.toastr)}})}constructor(t,r){this.toastr=t,this.authService=r,this.textareaValue=0,this.token=localStorage.getItem("token")}ngOnDestroy(){this.dataSubscription$?.unsubscribe()}ngAfterViewInit(){this.getCurrentUserCredentials()}};l.\u0275fac=function(r){return new(r||l)(g(R),g(L))},l.\u0275cmp=k({type:l,selectors:[["app-support"]],decls:15,vars:2,consts:[["textarea",""],["span",""],[1,"bg-gradient-to-b","from-white","to-sky-400","h-64","dark:from-black","dark:to-cyan-300","mt-4","flex","flex-col","justify-center","items-center"],[1,"font-semibold","md:text-lg","dark:text-white"],["type","text","placeholder","Type your issue here",1,"mt-2","py-1","px-2","w-[260px]","md:w-[300px]","rounded-lg","dark:bg-black","dark:text-white",3,"input"],[1,"font-bold"],["type","button",1,"mt-4","bg-white","rounded-xl","text-base","border-2","border-transparent","hover:border-black","transition","ease-in-out","duration-300","px-4","py-2","font-semibold",3,"click"],["bdColor","rgba(0, 0, 0, 0.8)","size","medium","color","#029cb0","type","ball-fussion",3,"fullScreen"],[2,"color","rgb(0, 183, 255)"]],template:function(r,a){if(r&1){let u=C();n(0,"div",2)(1,"h3",3),d(2,"You need some help?"),o(),n(3,"textarea",4,0),f("input",function(){h(u);let P=B(4),D=B(7);return v(a.setLength(P,D))}),o(),n(5,"p",5)(6,"span",null,1),d(8),o(),d(9," / 200"),o(),n(10,"button",6),f("click",function(){h(u);let P=B(4);return v(a.requestSupport(P))}),d(11,"Get support"),o()(),n(12,"ngx-spinner",7)(13,"p",8),d(14," Sending your request... "),o()()}r&2&&(s(8),_(a.textareaValue),s(4),c("fullScreen",!0))},dependencies:[We]});let i=l;return i})();var He=(()=>{let l=class l{constructor(){this.showDialog=new ve(!1),this.value=new ve(""),this.value$=this.value.asObservable()}openDialog(){return this.showDialog.next(!0),this.value.next(""),this.value$.pipe(Le(t=>t!==""))}onSubmitPassword(t){t&&(this.value.next(t),this.showDialog.next(!1))}};l.\u0275fac=function(r){return new(r||l)},l.\u0275prov=fe({token:l,factory:l.\u0275fac,providedIn:"root"});let i=l;return i})();function ri(i,l){if(i&1){let e=C();n(0,"div",2)(1,"div",3)(2,"h2",4),d(3,"Enter Password"),o(),p(4,"input",5,0),n(6,"button",6),f("click",function(){h(e);let r=B(5),a=m();return v(a.passwordService.onSubmitPassword(r.value))}),d(7,"Submit"),o()()()}}var kt=(()=>{let l=class l{constructor(t){this.passwordService=t}};l.\u0275fac=function(r){return new(r||l)(g(He))},l.\u0275cmp=k({type:l,selectors:[["app-pass"]],decls:2,vars:3,consts:[["input",""],["class","fixed inset-0 flex items-center justify-center z-[999] bg-black bg-opacity-50",4,"ngIf"],[1,"fixed","inset-0","flex","items-center","justify-center","z-[999]","bg-black","bg-opacity-50"],[1,"bg-white","dark:bg-gray-800","p-6","rounded-lg","shadow-lg"],[1,"text-xl","font-bold","mb-4","dark:text-white"],["type","password","placeholder","Password",1,"w-full","p-2","mb-4","border","border-gray-300","rounded","dark:bg-gray-700","dark:border-gray-600","dark:text-white"],[1,"w-full","bg-blue-500","text-white","p-2","rounded","hover:bg-blue-600","dark:bg-blue-700","dark:hover:bg-blue-800",3,"click"]],template:function(r,a){r&1&&(x(0,ri,8,0,"div",1),H(1,"async")),r&2&&c("ngIf",Q(1,1,a.passwordService.showDialog))},dependencies:[V,Ce]});let i=l;return i})();var Qe=(()=>{let l=class l{constructor(){this.isOpenSubject=new ve(!1),this.isConfirmedSubject=new ve(null),this.isConfirmedValue$=this.isConfirmedSubject.asObservable()}openDialog(){return this.isOpenSubject.next(!0),this.isConfirmedSubject.next(null),this.isConfirmedValue$.pipe(Le(t=>t!==null))}cancel(){this.isOpenSubject.next(!1),this.isConfirmedSubject.next(!1)}isConfirmed(){this.isConfirmedSubject.next(!0),this.isOpenSubject.next(!1)}};l.\u0275fac=function(r){return new(r||l)},l.\u0275prov=fe({token:l,factory:l.\u0275fac,providedIn:"root"});let i=l;return i})();function oi(i,l){if(i&1){let e=C();n(0,"div",1)(1,"div",2)(2,"h2",3),d(3,"Confirm Action"),o(),n(4,"div",4)(5,"button",5),f("click",function(){h(e);let r=m();return v(r.confirmService.cancel())}),d(6,"Cancel"),o(),n(7,"button",6),f("click",function(){h(e);let r=m();return v(r.confirmService.isConfirmed())}),d(8,"Accept"),o()()()()}}var It=(()=>{let l=class l{constructor(t){this.confirmService=t}};l.\u0275fac=function(r){return new(r||l)(g(Qe))},l.\u0275cmp=k({type:l,selectors:[["app-confirm-dialog"]],decls:2,vars:3,consts:[["class","fixed inset-0 flex items-center justify-center bg-black bg-opacity-50",4,"ngIf"],[1,"fixed","inset-0","flex","items-center","justify-center","bg-black","bg-opacity-50"],[1,"bg-white","dark:bg-gray-800","p-6","rounded-lg","shadow-lg"],[1,"text-xl","font-bold","mb-4","dark:text-white"],[1,"flex","justify-end","space-x-4"],[1,"bg-gray-500","text-white","p-2","rounded","hover:bg-gray-600","dark:bg-gray-700","dark:hover:bg-gray-800",3,"click"],[1,"bg-blue-500","text-white","p-2","rounded","hover:bg-blue-600","dark:bg-blue-700","dark:hover:bg-blue-800",3,"click"]],template:function(r,a){r&1&&(x(0,oi,9,0,"div",0),H(1,"async")),r&2&&c("ngIf",Q(1,1,a.confirmService.isOpenSubject))},dependencies:[V,Ce]});let i=l;return i})();function li(i,l){i&1&&(n(0,"div",1)(1,"div",2)(2,"div",3),p(3,"i",4),o(),n(4,"div",5),p(5,"i",6),n(6,"p",7),d(7,"Analysing content, please wait..."),o()()()())}var Et=(()=>{let l=class l{constructor(t){this.safetyService=t}};l.\u0275fac=function(r){return new(r||l)(g(Ue))},l.\u0275cmp=k({type:l,selectors:[["app-safety-dialog"]],decls:2,vars:3,consts:[["class","fixed inset-0 shadow-2xl z-[999] bg-black bg-opacity-50 flex items-center justify-center",4,"ngIf"],[1,"fixed","inset-0","shadow-2xl","z-[999]","bg-black","bg-opacity-50","flex","items-center","justify-center"],[1,"bg-white","dark:bg-black","p-6","rounded-lg","shadow-lg","text-center","mx-5"],[1,"mb-4"],[1,"fas","fa-spinner","fa-spin","text-4xl","text-cyan-500"],[1,"flex","items-center","justify-center","space-x-2"],[1,"fas","fa-shield-alt","text-cyan-500"],[1,"text-lg","font-semibold","dark:text-white"]],template:function(r,a){r&1&&(x(0,li,8,0,"div",0),H(1,"async")),r&2&&c("ngIf",Q(1,1,a.safetyService.isAnalysingSubject))},dependencies:[V,Ce]});let i=l;return i})();var Pt=(()=>{let l=class l{};l.\u0275fac=function(r){return new(r||l)},l.\u0275cmp=k({type:l,selectors:[["app-home"]],decls:7,vars:0,template:function(r,a){r&1&&p(0,"app-header")(1,"router-outlet")(2,"app-support")(3,"app-footer")(4,"app-pass")(5,"app-confirm-dialog")(6,"app-safety-dialog")},dependencies:[vt,bt,xt,St,kt,It,Et]});let i=l;return i})();var ci=i=>["/alexpress/product",i],Fe=i=>({"text-yellow-400":i});function pi(i,l){if(i&1&&(n(0,"h2",4),d(1),o()),i&2){let e=m();c("ngClass",e.locationStrategy.path().includes("alexpress/home")||e.locationStrategy.path().includes("alexpress/product/")||e.locationStrategy.path().includes("alexpress/wish_list")?"mt-10":"mt-40"),s(),_(e.title)}}function mi(i,l){if(i&1){let e=C();n(0,"div",5)(1,"p",6),d(2,"Order:"),o(),n(3,"div",7)(4,"p",8),f("click",function(){h(e);let r=m();return v(r.orderBy("none"))}),d(5,"No order"),o(),n(6,"div",9)(7,"p",10),f("click",function(){h(e);let r=m();return v(r.orderBy("price"))}),d(8,"Price"),o(),p(9,"i",11)(10,"i",12),o(),n(11,"div",9)(12,"p",13),f("click",function(){h(e);let r=m();return v(r.orderBy("rating"))}),d(13,"Rating"),o(),p(14,"i",14)(15,"i",15),o(),n(16,"div",9)(17,"p",16),f("click",function(){h(e);let r=m();return v(r.orderBy("orders"))}),d(18,"Orders"),o(),p(19,"i",14)(20,"i",15),o()()()}if(i&2){let e=m();s(9),N(e.sortingPrice?"font-bold":"text-red-500"),s(),N(e.sortingPrice?"text-red-500":"font-bold"),s(4),N(e.sortingRating?"font-bold":"text-red-500"),s(),N(e.sortingRating?"text-red-500":"font-bold"),s(4),N(e.sortingOrders?"font-bold":"text-red-500"),s(),N(e.sortingOrders?"text-red-500":"font-bold")}}function ui(i,l){i&1&&(n(0,"p",36),d(1," Your product "),o())}function fi(i,l){if(i&1&&(n(0,"span",37),d(1),o()),i&2){let e=m().$implicit;s(),w("USD $",e.shippingPrice,"")}}function xi(i,l){i&1&&(n(0,"span",37),d(1,"Free"),o())}function gi(i,l){if(i&1){let e=C();n(0,"div",3)(1,"div",17)(2,"a",18),p(3,"img",19),o(),n(4,"div",20),p(5,"i",21)(6,"i",21)(7,"i",21)(8,"i",21)(9,"i",21),o(),x(10,ui,2,0,"p",22),o(),n(11,"div",23)(12,"p",24),d(13),o(),n(14,"div")(15,"p",25),d(16,"USD"),n(17,"span",26),d(18),o()(),n(19,"p",27),d(20,"Shipping: "),x(21,fi,2,1,"span",28)(22,xi,2,0,"span",28),o()(),n(23,"div",29)(24,"p",30),d(25),o(),n(26,"p",31),d(27),o()()(),n(28,"div",32)(29,"button",33),f("click",function(){let r=h(e).$implicit,a=m();return v(a.addToCart(r.id))}),p(30,"i",34),o(),n(31,"button",33),f("click",function(){let r=h(e).$implicit,a=m();return v(a.addToWishList(r.id))}),p(32,"i",35),o()()()}if(i&2){let e=l.$implicit,t=m();s(2),c("routerLink",y(14,ci,e.id)),s(),c("src",e.images[0],E),s(2),c("ngClass",y(16,Fe,t.calculateStarRating(e)>=1)),s(),c("ngClass",y(18,Fe,t.calculateStarRating(e)>=2)),s(),c("ngClass",y(20,Fe,t.calculateStarRating(e)>=3)),s(),c("ngClass",y(22,Fe,t.calculateStarRating(e)>=4)),s(),c("ngClass",y(24,Fe,t.calculateStarRating(e)>=5)),s(),c("ngIf",t.userCredentials&&t.userCredentials.username===e.username),s(3),_(e.title),s(5),_(e.price),s(3),c("ngIf",e.shippingPrice),s(),c("ngIf",!e.shippingPrice),s(3),_(e.condition),s(2),w("",e.quantity," available")}}var X=(()=>{let l=class l{rateProduct(t){this.rating=t,this.isRated=!0}addToCart(t){this.authService.addProductToUserCart(t)}addToWishList(t){this.authService.addToUserWishList(t)}calculateStarRating(t){return t.accumulated/t.votes}deleteProductAdmin(t,r){this.authService.removeFromMyProducts(t),this.products.splice(r,1)}getCurrentUserCredentials(){this.token&&this.authService.getCurrentUserCredentials().pipe(I(this.destroy$)).subscribe(t=>this.userCredentials=t)}orderBy(t){switch(t){case"none":this.products.sort((r,a)=>r.id-a.id);break;case"price":this.sortingPrice=!this.sortingPrice,this.sortingPrice?this.products.sort((r,a)=>a.price-r.price):this.products.sort((r,a)=>r.price-a.price);break;case"rating":this.sortingRating=!this.sortingRating,this.sortingRating?this.products.sort((r,a)=>a.accumulated-r.accumulated):this.products.sort((r,a)=>r.accumulated-a.accumulated);break;case"orders":this.sortingOrders=!this.sortingOrders,this.sortingOrders?this.products.sort((r,a)=>a.sold-r.sold):this.products.sort((r,a)=>r.sold-a.sold);break}}constructor(t,r,a,u,S){this.productsService=t,this.authService=r,this.locationStrategy=a,this.router=u,this.spinnerService=S,this.title="All products",this.products=[],this.rating=0,this.isRated=!1,this.token=localStorage.getItem("token"),this.destroy$=new U,this.sortingPrice=null,this.sortingRating=null,this.sortingOrders=null}ngOnInit(){this.spinnerService.show(),(this.locationStrategy.path().includes("/alexpress/home")||this.locationStrategy.path().includes("/alexpress/products")||this.router.url.includes("/alexpress/product/")||this.locationStrategy.path().includes("/alexpress/wish_list"))&&this.productsService.loadProducts().pipe(I(this.destroy$),be(()=>this.spinnerService.hide())).subscribe(S=>{this.products=S}),this.getCurrentUserCredentials()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}};l.\u0275fac=function(r){return new(r||l)(g(W),g(L),g(mt),g(Z),g(me))},l.\u0275cmp=k({type:l,selectors:[["app-products"]],inputs:{title:"title",products:"products"},decls:5,vars:2,consts:[["class","text-center text-3xl font-bold dark:text-white",3,"ngClass",4,"ngIf"],["class","flex w-full justify-center x:justify-start items-center mb-8 mt-4",4,"ngIf"],[1,"w-[95%]","mx-auto","grid","grid-cols-2","content-center","justify-items-center","gap-2","md:grid-cols-3","lg:grid-cols-4"],[1,"flex","flex-col","items-center","mt-5","bg-gray-100","dark:bg-gray-950","css-layout","rounded-lg"],[1,"text-center","text-3xl","font-bold","dark:text-white",3,"ngClass"],[1,"flex","w-full","justify-center","x:justify-start","items-center","mb-8","mt-4"],[1,"font-bold","x:text-base","md:text-xl","x:ml-10","dark:text-white"],[1,"flex","px-2"],[1,"text-sm","x:text-base","md:text-base","px-1","x:px-3","font-medium","border-2","transition","ease-in-out","duration-300","hover:bg-gray-300","cursor-pointer","border-black","dark:border-white","border-r-0","rounded-l-lg","dark:text-white","dark:hover:text-black",3,"click"],[1,"relative"],[1,"text-sm","x:text-base","md:text-base","pr-4","pl-1","x:pr-5","font-medium","border-2","transition","ease-in-out","duration-300","hover:bg-cyan-300","cursor-pointer","border-black","dark:border-white","border-r-0","dark:text-white","dark:hover:text-black",3,"click"],[1,"fa-solid","fa-caret-up","absolute","top-0","right-1","x:top-1","text-xs"],[1,"fa-solid","fa-caret-down","absolute","top-2","right-1","x:top-3","text-xs"],[1,"text-sm","x:text-base","md:text-base","pr-4","pl-1","font-medium","border-2","transition","ease-in-out","duration-300","hover:bg-cyan-300","cursor-pointer","border-black","dark:border-white","border-r-0","dark:text-white","dark:hover:text-black",3,"click"],[1,"fa-solid","fa-caret-up","absolute","top-0","x:top-1","right-1","text-xs"],[1,"fa-solid","fa-caret-down","absolute","top-2","x:top-3","right-1","text-xs"],[1,"text-sm","x:text-base","md:text-base","pr-4","pl-1","font-medium","border-2","transition","ease-in-out","duration-300","hover:bg-cyan-300","cursor-pointer","border-black","dark:border-white","rounded-r-lg","dark:text-white","dark:hover:text-black",3,"click"],[1,"w-full","relative"],[1,"container",3,"routerLink"],["alt","image",1,"w-full","h-36","object-cover","rounded-tl-lg","rounded-tr-lg",3,"src"],[1,"absolute","bottom-1","left-1","bg-gray-200","px-1","rounded-lg"],[1,"fa-solid","fa-star",3,"ngClass"],["class",`absolute left-0 top-1 mx-1 px-2 
            border-cyan-400 border-[1px]
            bg-gradient-to-r
            from-cyan-300 to-cyan-500 
            text-black dark:text-black 
            font-bold rounded-md w-max 
            text-sm`,4,"ngIf"],[1,"p-1"],[1,"dark:text-white","text-sm","line-clamp-2","font-bold","min-h-10","max-w-[226px]","break-words"],[1,"dark:text-white","text-xs"],[1,"text-3xl","ml-1","font-bold","x:text-4xl"],[1,"hidden","dark:text-white","text-sm","x:block","font-bold"],["class","text-red-400",4,"ngIf"],[1,"flex","items-center","justify-evenly","gap-2"],[1,"hidden","text-sm","my-2","rounded-lg","x:block","bg-cyan-300","px-1","font-bold"],[1,"hidden","text-sm","my-2","rounded-lg","x:block","bg-gray-300","px-1","font-bold"],[1,"container","flex","items-center","justify-evenly","my-2"],[3,"click"],[1,"fa-solid","fa-cart-plus","dark:text-white","text-lg","border-2","border-cyan-300","px-3","rounded-lg","hover:bg-cyan-300","hover:text-black","dark:hover:text-black","dark:hover:bg-cyan-300","transition","ease-in-out","duration-150"],[1,"fa-regular","fa-heart","dark:text-white","text-lg","border-2","border-cyan-300","px-3","rounded-lg","hover:bg-cyan-300","hover:text-black","dark:hover:text-black","dark:hover:bg-cyan-300","transition","ease-in-out","duration-150"],[1,"absolute","left-0","top-1","mx-1","px-2","border-cyan-400","border-[1px]","bg-gradient-to-r","from-cyan-300","to-cyan-500","text-black","dark:text-black","font-bold","rounded-md","w-max","text-sm"],[1,"text-red-400"]],template:function(r,a){r&1&&(x(0,pi,2,2,"h2",0)(1,mi,21,12,"div",1),n(2,"div",2),F(3,gi,33,26,"div",3,O),o()),r&2&&(c("ngIf",!a.locationStrategy.path().includes("/alexpress/less")),s(),c("ngIf",!a.locationStrategy.path().includes("/alexpress/less")),s(2),T(a.products))},dependencies:[q,V,z],styles:[".css-layout[_ngcontent-%COMP%]{max-width:256px;width:160px}@media (min-width:410px){.css-layout[_ngcontent-%COMP%]{width:180px}}@media (min-width:500px){.css-layout[_ngcontent-%COMP%]{width:220px}}@media (min-width:610px){.css-layout[_ngcontent-%COMP%]{width:260px}}@media (min-width:768px){.css-layout[_ngcontent-%COMP%]{width:235px}}@media (min-width:1024px){.css-layout[_ngcontent-%COMP%]{width:235px}}"]});let i=l;return i})();var Je=()=>["/alexpress/categories",6],Xe=()=>["/alexpress/categories",7],Ke=()=>["/alexpress/categories",4],et=()=>["/alexpress/categories",5],tt=()=>["/alexpress/categories",3],it=()=>["/alexpress/categories",2],rt=()=>["/alexpress/categories",1],Ft=(()=>{let l=class l{};l.\u0275fac=function(r){return new(r||l)},l.\u0275cmp=k({type:l,selectors:[["app-categories-slider"]],decls:109,vars:42,consts:[[1,"overflow-hidden"],[1,"text-center","font-bold","text-3xl","dark:text-white","mb-7"],[1,"slide-track","flex","items-center","justify-center","gap-5"],[1,"flex","flex-col","justify-center","items-center"],[1,"bg-gradient-to-r","from-cyan-300","via-red-600","to-cyan-200","border-2","border-cyan-600","rounded-full","p-1"],["src","/alexpress-page/assets/categories-img/tv-icon.webp","alt","category-icon",1,"w-32","object-cover","h-32","rounded-full","cursor-pointer",3,"routerLink"],[1,"dark:text-white","font-bold","mt-2"],["src","/alexpress-page/assets/categories-img/audio-icon.jpg","alt","category-icon",1,"w-32","object-cover","h-32","rounded-full","cursor-pointer",3,"routerLink"],["src","/alexpress-page/assets/categories-img/pet-toy-icon.jpg","alt","category-icon",1,"w-32","object-cover","h-32","rounded-full","cursor-pointer",3,"routerLink"],["src","/alexpress-page/assets/categories-img/phone-icon.jpg","alt","category-icon",1,"w-32","object-cover","h-32","rounded-full","cursor-pointer",3,"routerLink"],["src","/alexpress-page/assets/categories-img/shoes-icon.jpg","alt","category-icon",1,"w-32","object-cover","h-32","rounded-full","cursor-pointer",3,"routerLink"],["src","/alexpress-page/assets/categories-img/t-shirt-icon.webp","alt","category-icon",1,"w-32","object-cover","h-32","rounded-full","cursor-pointer",3,"routerLink"],["src","/alexpress-page/assets/categories-img/watch-icon.webp","alt","category-icon",1,"w-32","object-cover","h-32","rounded-full","cursor-pointer",3,"routerLink"]],template:function(r,a){r&1&&(n(0,"div",0)(1,"h2",1),d(2,"Categories"),o(),n(3,"div",2)(4,"article",3)(5,"div",4),p(6,"img",5),o(),n(7,"p",6),d(8,"Home & appliances"),o()(),n(9,"article",3)(10,"div",4),p(11,"img",7),o(),n(12,"p",6),d(13,"Audio & sound"),o()(),n(14,"article",3)(15,"div",4),p(16,"img",8),o(),n(17,"p",6),d(18,"Pet toys"),o()(),n(19,"article",3)(20,"div",4),p(21,"img",9),o(),n(22,"p",6),d(23,"Phone & tablet"),o()(),n(24,"article",3)(25,"div",4),p(26,"img",10),o(),n(27,"p",6),d(28,"Shoes"),o()(),n(29,"article",3)(30,"div",4),p(31,"img",11),o(),n(32,"p",6),d(33,"Clothes"),o()(),n(34,"article",3)(35,"div",4),p(36,"img",12),o(),n(37,"p",6),d(38,"Watches"),o()(),n(39,"article",3)(40,"div",4),p(41,"img",5),o(),n(42,"p",6),d(43,"Home & appliances"),o()(),n(44,"article",3)(45,"div",4),p(46,"img",7),o(),n(47,"p",6),d(48,"Audio & sound"),o()(),n(49,"article",3)(50,"div",4),p(51,"img",8),o(),n(52,"p",6),d(53,"Pet toys"),o()(),n(54,"article",3)(55,"div",4),p(56,"img",9),o(),n(57,"p",6),d(58,"Phone & tablet"),o()(),n(59,"article",3)(60,"div",4),p(61,"img",10),o(),n(62,"p",6),d(63,"Shoes"),o()(),n(64,"article",3)(65,"div",4),p(66,"img",11),o(),n(67,"p",6),d(68,"Clothes"),o()(),n(69,"article",3)(70,"div",4),p(71,"img",12),o(),n(72,"p",6),d(73,"Watches"),o()(),n(74,"article",3)(75,"div",4),p(76,"img",5),o(),n(77,"p",6),d(78,"Home & appliances"),o()(),n(79,"article",3)(80,"div",4),p(81,"img",7),o(),n(82,"p",6),d(83,"Audio & sound"),o()(),n(84,"article",3)(85,"div",4),p(86,"img",8),o(),n(87,"p",6),d(88,"Pet toys"),o()(),n(89,"article",3)(90,"div",4),p(91,"img",9),o(),n(92,"p",6),d(93,"Phone & tablet"),o()(),n(94,"article",3)(95,"div",4),p(96,"img",10),o(),n(97,"p",6),d(98,"Shoes"),o()(),n(99,"article",3)(100,"div",4),p(101,"img",11),o(),n(102,"p",6),d(103,"Clothes"),o()(),n(104,"article",3)(105,"div",4),p(106,"img",12),o(),n(107,"p",6),d(108,"Watches"),o()()()()),r&2&&(s(6),c("routerLink",A(21,Je)),s(5),c("routerLink",A(22,Xe)),s(5),c("routerLink",A(23,Ke)),s(5),c("routerLink",A(24,et)),s(5),c("routerLink",A(25,tt)),s(5),c("routerLink",A(26,it)),s(5),c("routerLink",A(27,rt)),s(5),c("routerLink",A(28,Je)),s(5),c("routerLink",A(29,Xe)),s(5),c("routerLink",A(30,Ke)),s(5),c("routerLink",A(31,et)),s(5),c("routerLink",A(32,tt)),s(5),c("routerLink",A(33,it)),s(5),c("routerLink",A(34,rt)),s(5),c("routerLink",A(35,Je)),s(5),c("routerLink",A(36,Xe)),s(5),c("routerLink",A(37,Ke)),s(5),c("routerLink",A(38,et)),s(5),c("routerLink",A(39,tt)),s(5),c("routerLink",A(40,it)),s(5),c("routerLink",A(41,rt)))},dependencies:[z],styles:[".slide-track[_ngcontent-%COMP%]{-webkit-animation:_ngcontent-%COMP%_scroll 20s linear infinite;animation:_ngcontent-%COMP%_scroll 20s linear infinite;width:3570px}@keyframes _ngcontent-%COMP%_scroll{0%{-webkit-transform:translateX(0);transform:translate(0)}to{-webkit-transform:translateX(-1400px);transform:translate(-1400px)}}"]});let i=l;return i})();var ue=i=>["/alexpress/product",i];function vi(i,l){if(i&1&&(n(0,"a",26),p(1,"img",27),o()),i&2){let e=m(2);c("routerLink",y(2,ue,e.lessFourProducts[0].id||0)),s(),c("src",e.lessFourProducts[0].images[0],E)}}function bi(i,l){if(i&1&&(n(0,"p",28)(1,"span",29),d(2,"USD"),o(),d(3),o()),i&2){let e=m(2);s(3),w("",e.lessFourProducts[0].price,"$")}}function _i(i,l){if(i&1&&(n(0,"a",26),p(1,"img",30),o()),i&2){let e=m(2);c("routerLink",y(2,ue,e.lessFourProducts[1].id||0)),s(),c("src",e.lessFourProducts[1].images[0],E)}}function yi(i,l){if(i&1&&(n(0,"p",28)(1,"span",29),d(2,"USD"),o(),d(3),o()),i&2){let e=m(2);s(3),w("",e.lessFourProducts[1].price,"$")}}function Si(i,l){i&1&&p(0,"img",31)}function Ci(i,l){if(i&1&&(n(0,"div",21)(1,"div"),x(2,vi,2,4,"a",22)(3,bi,4,1,"p",23),o(),n(4,"div",24),x(5,_i,2,4,"a",22)(6,yi,4,1,"p",23)(7,Si,1,0,"img",25),o()()),i&2){let e=m();s(2),c("ngIf",e.lessFourProducts[0]&&e.lessFourProducts[0].id!==void 0||null),s(),c("ngIf",e.lessFourProducts[0]&&e.lessFourProducts[0].id!==void 0||null),s(2),c("ngIf",e.lessFourProducts[1]&&e.lessFourProducts[1].id!==void 0||null),s(),c("ngIf",e.lessFourProducts[1]&&e.lessFourProducts[1].id!==void 0||null),s(),c("ngIf",!e.lessFourProducts[1]||e.lessFourProducts[1].id===void 0||null)}}function ki(i,l){if(i&1&&(n(0,"div")(1,"a",26),p(2,"img",33),o(),n(3,"p",28)(4,"span",29),d(5,"USD"),o(),d(6),o()()),i&2){let e=m().$implicit;s(),c("routerLink",y(3,ue,e.id)),s(),c("src",e.images[0],E),s(4),w("",e.price,"$")}}function wi(i,l){if(i&1&&x(0,ki,7,5,"div"),i&2){let e=l.$index;xe(0,e>1?0:-1)}}function Ii(i,l){if(i&1&&(n(0,"div",32),F(1,wi,1,1,null,null,O),o()),i&2){let e=m();s(),T(e.lessFourProducts)}}function Ei(i,l){if(i&1&&(n(0,"div",12)(1,"a",26),p(2,"img",34),o(),n(3,"p",35)(4,"span",29),d(5,"USD"),o(),d(6),o()()),i&2){let e=l.$implicit;s(),c("routerLink",y(3,ue,e.id)),s(),c("src",e.images[0],E),s(4),w("",e.price,"$")}}function Pi(i,l){if(i&1&&(n(0,"div")(1,"a",26),p(2,"img",38),o(),n(3,"p",28)(4,"span",29),d(5,"USD"),o(),d(6),o()()),i&2){let e=m().$implicit;s(),c("routerLink",y(3,ue,e.id)),s(),c("src",e.images[0],E),s(4),w("",e.price,"$")}}function Fi(i,l){if(i&1&&x(0,Pi,7,5,"div"),i&2){let e=l.$index;xe(0,e<2?0:-1)}}function Ti(i,l){if(i&1&&(n(0,"div",39)(1,"a",26),p(2,"img",38),o(),n(3,"p",28)(4,"span",29),d(5,"USD"),o(),d(6),o()()),i&2){let e=m(2);s(),c("routerLink",y(3,ue,e.allProducts[6].id)),s(),c("src",e.allProducts[6].images[0],E),s(4),w("",e.allProducts[6].price,"$")}}function Di(i,l){if(i&1&&(n(0,"div",36),F(1,Fi,1,1,null,null,O),x(3,Ti,7,5,"div",37),o()),i&2){let e=m();s(),T(e.allProducts),s(2),c("ngIf",e.allProducts[6])}}function Vi(i,l){if(i&1&&(n(0,"div",12)(1,"a",26),p(2,"img",42),o(),n(3,"p",43)(4,"span",29),d(5,"USD"),o(),d(6),o()()),i&2){let e=m().$implicit;s(),c("routerLink",y(3,ue,e.id)),s(),c("src",e.images[0],E),s(4),w("",e.price,"$")}}function ji(i,l){if(i&1&&x(0,Vi,7,5,"div",12),i&2){let e=l.$index;xe(0,e<3?0:-1)}}function Ni(i,l){if(i&1&&(n(0,"div",44)(1,"a",26),p(2,"img",45),o(),n(3,"p",43)(4,"span",29),d(5,"USD"),o(),d(6),o()()),i&2){let e=m(2);s(),c("routerLink",y(3,ue,e.fewUnits[3].id)),s(),c("src",e.fewUnits[3].images[0],E),s(4),w("",e.fewUnits[3].price,"$")}}function Li(i,l){if(i&1&&(n(0,"div",40),F(1,ji,1,1,null,null,O),x(3,Ni,7,5,"div",41),o()),i&2){let e=m();s(),T(e.fewUnits),s(2),c("ngIf",e.fewUnits[3]&&e.fewUnits[3].id!==void 0)}}var Tt=(()=>{let l=class l{loadProductsFromService(){this.spinnerService.show(),this.dataSubscription$=this.productsService.loadProducts().pipe(be(()=>this.spinnerService.hide())).subscribe(t=>{this.allProducts=t,this.fewUnits=t.filter(r=>r.quantity<10),this.lessFourProducts=t.filter(r=>r.price<=3.99).splice(0,4),this.newProducts=t.sort((r,a)=>a.id-r.id).splice(0,4)})}constructor(t,r){this.productsService=t,this.spinnerService=r,this.allProducts=[],this.lessFourProducts=[],this.newProducts=[],this.fewUnits=[]}ngOnInit(){this.loadProductsFromService()}ngOnDestroy(){this.dataSubscription$?.unsubscribe()}};l.\u0275fac=function(r){return new(r||l)(g(W),g(me))},l.\u0275cmp=k({type:l,selectors:[["app-home"]],decls:34,vars:4,consts:[[1,"flex","flex-col","mt-24","p-2","mb-10","md:mt-32","lg:flex-row","lg:justify-center","lg:gap-4"],[1,"bg-gray-200","dark:bg-black","dark:border-2","dark:border-sky-400","p-2","flex","flex-col","items-center","rounded-2xl","lg:mt-10"],[1,"mt-4","lg:p-4"],[1,"font-bold","text-2xl","lg:text-4xl","dark:text-white"],[1,"text-red-600"],[1,"font-semibold","mb-4","lg:text-xl","dark:text-white"],["class","x:flex x:gap-2",4,"ngIf"],["class","flex justify-evenly items-center gap-2 bg-gray-300 rounded-lg p-2 md:p-6 md:mt-4",4,"ngIf"],[1,"px-4","bg-gradient-to-b","from-cyan-200","to-sky-400","rounded-3xl","mt-6"],[1,"text-4xl","mt-6","font-bold","lg:text-5xl"],[1,"font-bold","text-lg","text-red-600","mb-4"],[1,"flex","flex-wrap","justify-center","gap-2"],[1,""],[1,"bg-gray-100","p-4","dark:bg-black","mt-4","rounded-xl"],[1,"text-3xl","font-bold","dark:text-white"],[1,"font-bold","text-red-600","mb-4"],["class","flex justify-evenly gap-4",4,"ngIf"],[1,"mb-6"],[1,"font-bold","text-4xl","text-red-600","mt-6"],[1,"font-bold","text-xl","mb-2","dark:text-white"],["class","flex justify-evenly gap-2 lg:justify-evenly",4,"ngIf"],[1,"x:flex","x:gap-2"],[3,"routerLink",4,"ngIf"],["class","text-red-600 font-bold text-xl pr-4",4,"ngIf"],[1,"lg:hidden"],["class","w-80 h-80 object-cover rounded-xl lg:w-96 lg:h-96","src","/alexpress-page/assets/images/noproduct.webp","alt","image",4,"ngIf"],[3,"routerLink"],["alt","image",1,"w-60","h-48","md:w-72","md:h-60","object-cover","rounded-xl","lg:w-80","lg:h-72",3,"src"],[1,"text-red-600","font-bold","text-xl","pr-4"],[1,"p-1"],["alt","image",1,"w-60","h-48","md:w-72","md:h-60","object-cover","rounded-xl",3,"src"],["src","/alexpress-page/assets/images/noproduct.webp","alt","image",1,"w-80","h-80","object-cover","rounded-xl","lg:w-96","lg:h-96"],[1,"flex","justify-evenly","items-center","gap-2","bg-gray-300","rounded-lg","p-2","md:p-6","md:mt-4"],["alt","image",1,"max-w-32","max-h-32","md:max-w-72","md:max-h-72","object-cover","rounded-xl","lg:w-48","lg:h-48",3,"src"],["alt","image",1,"w-32","h-32","md:w-40","md:h-40","shadow-[rgba(0,_0,_0,_0.24)_0px_3px_8px]","rounded-lg","object-cover",3,"src"],[1,"text-black","font-bold","text-xl","pr-4"],[1,"flex","justify-evenly","gap-4"],["class","hidden x:block",4,"ngIf"],["alt","image",1,"w-32","h-32","rounded-lg","object-cover","md:w-48","md:h-48","lg:h-40",3,"src"],[1,"hidden","x:block"],[1,"flex","justify-evenly","gap-2","lg:justify-evenly"],["class","lg:block hidden",4,"ngIf"],["alt","image",1,"w-24","rounded-xl","h-24","x:w-40","x:h-32","object-cover","lg:w-32","lg:h-32",3,"src"],[1,"text-white","font-bold","text-sm","md:text-xl","pr-4"],[1,"lg:block","hidden"],["alt","image",1,"w-24","rounded-xl","h-24","object-cover","lg:w-32","lg:h-32",3,"src"]],template:function(r,a){r&1&&(n(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3",3),d(4,"Products just for "),n(5,"span",4),d(6,"3,99$ USD"),o()(),n(7,"p",5),d(8,"Free shipping"),o()(),x(9,Ci,8,5,"div",6)(10,Ii,3,0,"div",7),o(),n(11,"div",8)(12,"h3",9),d(13,"New"),o(),n(14,"p",10),d(15,"Released this month"),o(),n(16,"div",11),F(17,Ei,7,5,"div",12,O),o(),n(19,"div")(20,"div",13)(21,"h3",14),d(22,"You may like"),o(),n(23,"p",15),d(24,"Offers for you"),o(),x(25,Di,4,1,"div",16),o(),n(26,"div",17)(27,"h3",18),d(28,"Few units"),o(),n(29,"p",19),d(30,"Don't miss them"),o(),x(31,Li,4,1,"div",20),o()()()(),p(32,"app-categories-slider")(33,"app-products")),r&2&&(s(9),c("ngIf",a.lessFourProducts.length>0),s(),c("ngIf",a.lessFourProducts&&a.lessFourProducts.length>2),s(7),T(a.newProducts),s(8),c("ngIf",a.allProducts.length),s(6),c("ngIf",a.fewUnits.length))},dependencies:[V,z,X,Ft]});let i=l;return i})();var Oi=i=>({hidden:i});function $i(i,l){i&1&&(n(0,"p",2),d(1,"No products matched with this category"),o())}var Dt=(()=>{let l=class l{addToCart(t){this.authService.addProductToUserCart(t)}addToWishList(t){this.authService.addToUserWishList(t)}getProductsByCategory(){this.activatedRoute.params.pipe(_e(({id:t})=>this.productsService.getProductsByCategory(t)),I(this.destroy$)).subscribe(t=>{this.productsByCategory=t,this.title=t[0]?.category})}constructor(t,r,a){this.productsService=t,this.authService=r,this.activatedRoute=a,this.productsByCategory=[],this.destroy$=new U,this.title=""}ngOnInit(){this.getProductsByCategory()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}};l.\u0275fac=function(r){return new(r||l)(g(W),g(L),g(ke))},l.\u0275cmp=k({type:l,selectors:[["app-categories"]],decls:2,vars:6,consts:[["class","my-60 text-center font-bold text-gray-300",4,"ngIf"],[3,"ngClass","title","products"],[1,"my-60","text-center","font-bold","text-gray-300"]],template:function(r,a){r&1&&(x(0,$i,2,0,"p",0),p(1,"app-products",1)),r&2&&(c("ngIf",a.productsByCategory.length===0),s(),c("ngClass",y(4,Oi,a.productsByCategory.length===0))("title",a.title)("products",a.productsByCategory))},dependencies:[q,V,X]});let i=l;return i})();var De=i=>({"text-yellow-400 dark:text-yellow-400":i}),Mi=i=>({"text-gray-300 pointer-events-none":i}),Ui=i=>({"ml-2":i}),Vt=(i,l)=>({"from-green-400 via-green-500 to-green-600 border-green-600":i,"from-gray-400 via-gray-500 to-gray-600 border-gray-600":l}),Ai=(i,l,e)=>({"from-green-400 via-green-500 to-green-600 border-green-600":i,"from-gray-400 via-gray-500 to-gray-600 border-gray-600":l,"from-orange-400 via-orange-500 to-orange-600 border-orange-600":e}),Ve=i=>({"text-yellow-400":i});function Bi(i,l){if(i&1&&(n(0,"a",10),p(1,"img",48),o()),i&2){let e=m().$implicit;c("href",e,E),s(),c("src",e,E)}}function Ri(i,l){if(i&1&&x(0,Bi,2,2,"a",10),i&2){let e=l.$index;xe(0,e>0?0:-1)}}function qi(i,l){if(i&1&&(n(0,"p",49),d(1),o()),i&2){let e=m(2);s(),w("(",e.calculateStarRating(e.product).toFixed(1),")")}}function zi(i,l){i&1&&(n(0,"span"),d(1,"people have rated this product"),o())}function Wi(i,l){i&1&&(n(0,"span"),d(1,"person has rated this product"),o())}function Hi(i,l){if(i&1&&(n(0,"p",50),d(1),x(2,zi,2,0,"span",51)(3,Wi,2,0,"span",51),o()),i&2){let e=m(2);s(),w("",e.product.votes," "),s(),c("ngIf",e.product.votes>1),s(),c("ngIf",e.product.votes===1)}}function Qi(i,l){if(i&1&&(n(0,"p",52),d(1,"No one has voted this product yet"),o()),i&2){let e=m(2);c("ngClass",y(1,Ui,!e.product.votes))}}function Gi(i,l){if(i&1&&(n(0,"small",53),d(1,"Shipping: USD "),n(2,"span",25),d(3),o(),d(4,"$"),o()),i&2){let e=m(2);s(3),_(e.product.shippingPrice)}}function Yi(i,l){i&1&&(n(0,"small",54),d(1,"Shipping: "),n(2,"span",55),d(3,"Free shipping"),o()())}function Zi(i,l){i&1&&(n(0,"p",56),d(1,"Available discount coupons"),o())}function Ji(i,l){i&1&&(n(0,"p",57),d(1,"Discount coupon selected for this product"),o())}function Xi(i,l){i&1&&p(0,"i",64)}function Ki(i,l){if(i&1){let e=C();n(0,"button",62,0),f("click",function(){h(e);let r=B(1),a=m(3);return v(a.selectedCoupon(r.value))}),d(2,"Free shipping "),x(3,Xi,1,0,"i",63),o()}if(i&2){let e=m(3);c("ngClass",te(3,Vt,e.isFreeShippingSelected,e.isFreeShippingSelected===!1))("disabled",e.isFreeShippingSelected===!1),s(3),c("ngIf",e.isFreeShippingSelected)}}function er(i,l){i&1&&p(0,"i",64)}function tr(i,l){if(i&1){let e=C();n(0,"button",65,1),f("click",function(){h(e);let r=B(1),a=m(3);return v(a.selectedCoupon(r.value))}),d(2,"Buy 2 or more, get 50% off in one product "),x(3,er,1,0,"i",63),o()}if(i&2){let e=m(3);c("ngClass",pt(3,Ai,e.isBuy2Selected,e.isBuy2Selected===!1,e.quantity<2))("disabled",e.isBuy2Selected===!1),s(3),c("ngIf",e.isBuy2Selected)}}function ir(i,l){i&1&&p(0,"i",64)}function rr(i,l){if(i&1){let e=C();n(0,"button",66,2),f("click",function(){h(e);let r=B(1),a=m(3);return v(a.selectedCoupon(r.value))}),d(2),n(3,"span",67),d(4),x(5,ir,1,0,"i",63),o()()}if(i&2){let e=m(3);c("ngClass",te(6,Vt,e.isCustomSelected,e.isCustomSelected===!1))("disabled",e.isCustomSelected===!1)("value",e.product.coupon.discount),s(2),w("",e.product.coupon.discount,"% off with coupon "),s(2),w("",e.product.coupon.name," "),s(),c("ngIf",e.isCustomSelected)}}function nr(i,l){i&1&&(n(0,"p",68),d(1,"No available coupons"),o())}function or(i,l){if(i&1&&(n(0,"div",41),x(1,Ki,4,6,"button",58)(2,tr,4,7,"button",59)(3,rr,6,9,"button",60)(4,nr,2,0,"p",61),o()),i&2){let e=m(2);s(),c("ngIf",e.product.coupon.isShippingFree),s(),c("ngIf",e.product.coupon.is50Discount),s(),c("ngIf",e.product.coupon.discount>0&&e.product.coupon.isDiscount),s(),c("ngIf",!e.product.coupon.is50Discount&&!e.product.coupon.isDiscount&&!e.product.coupon.isShippingFree)}}function ar(i,l){if(i&1){let e=C();n(0,"div",8)(1,"div",9)(2,"div")(3,"a",10),p(4,"img",11),o()(),n(5,"div",12),F(6,Ri,1,1,null,null,O),o()(),n(8,"div",13)(9,"h1",14),d(10),o(),n(11,"div",15),p(12,"i",16)(13,"i",16)(14,"i",16)(15,"i",16)(16,"i",16),n(17,"div",17),x(18,qi,2,1,"p",18)(19,Hi,4,3,"p",19)(20,Qi,2,3,"p",20),o()(),n(21,"p",21),d(22,"Seller: "),n(23,"span",22),d(24),o()(),n(25,"div",23)(26,"small",24),d(27,"USD "),n(28,"span",25),d(29),o(),d(30,"$"),o(),x(31,Gi,5,1,"small",26)(32,Yi,4,0,"small",27),n(33,"div",28),x(34,Zi,2,0,"p",29)(35,Ji,2,0,"p",30)(36,or,5,4,"div",31),o()(),n(37,"div",32)(38,"p",33),d(39),o(),n(40,"p",34),d(41),o()(),n(42,"div",17)(43,"label",35),d(44,"Quantity: "),o(),n(45,"div",36)(46,"p",37)(47,"i",38),f("click",function(){h(e);let r=m();return v(r.addQuantity(1))}),o()(),p(48,"input",39),n(49,"p")(50,"i",40),f("click",function(){h(e);let r=m();return v(r.addQuantity(-1))}),o()()()(),n(51,"div",41)(52,"div",42)(53,"button",43),f("click",function(){h(e);let r=m();return v(r.addToUserCart(r.product.id))}),p(54,"i",44),d(55,"Add to cart"),o(),n(56,"button",45),f("click",function(){h(e);let r=m();return v(r.addToWishlist(r.product.id))}),p(57,"i",46),d(58,"Add to my wish list"),o()()(),n(59,"p",47),d(60,"This is your product"),o()()()}if(i&2){let e=m();s(3),c("href",e.product.images[0],E),s(),c("src",e.product.images[0],E),s(2),T(e.product.images),s(4),_(e.product.title),s(2),c("ngClass",y(22,De,e.calculateStarRating(e.product)>=1)),s(),c("ngClass",y(24,De,e.calculateStarRating(e.product)>=2)),s(),c("ngClass",y(26,De,e.calculateStarRating(e.product)>=3)),s(),c("ngClass",y(28,De,e.calculateStarRating(e.product)>=4)),s(),c("ngClass",y(30,De,e.calculateStarRating(e.product)>=5)),s(2),c("ngIf",e.product.votes),s(),c("ngIf",e.product.votes),s(),c("ngIf",e.product.votes===0),s(4),_(e.product.username),s(5),_(e.product.price),s(2),c("ngIf",e.product.shippingPrice>0),s(),c("ngIf",e.product.shippingPrice===0),s(2),c("ngIf",e.couponExists===null),s(),c("ngIf",e.couponExists===!0),s(),c("ngIf",e.couponExists===null),s(3),w("",e.product.sold," sold"),s(2),w("",e.product.quantity," available"),s(5),c("ngClass",y(32,Mi,e.quantity===1)),s(2),c("value",e.quantity)}}function sr(i,l){i&1&&(n(0,"p",76),d(1,"(No comments yet)"),o())}function lr(i,l){if(i&1&&(n(0,"div",77)(1,"div",17),p(2,"i",79),n(3,"div",80)(4,"div",17)(5,"h4",81),d(6),H(7,"titlecase"),o(),n(8,"div",82),p(9,"i",83)(10,"i",83)(11,"i",83)(12,"i",83)(13,"i",83),o()(),n(14,"span",84),d(15),H(16,"date"),o()()(),n(17,"p",85),d(18),o()()),i&2){let e=m().$implicit;s(6),_(Q(7,8,e.comment.author)),s(3),c("ngClass",y(12,Ve,e.rating>=1)),s(),c("ngClass",y(14,Ve,e.rating>=2)),s(),c("ngClass",y(16,Ve,e.rating>=3)),s(),c("ngClass",y(18,Ve,e.rating>=4)),s(),c("ngClass",y(20,Ve,e.rating>=5)),s(2),w("Published on ",Q(16,10,e.comment.createdOn),""),s(3),_(e.comment.content)}}function dr(i,l){if(i&1&&x(0,lr,19,22,"div",78),i&2){let e=l.$implicit;c("ngIf",e)}}function cr(i,l){if(i&1){let e=C();n(0,"div",69)(1,"div",70)(2,"button",71),f("click",function(){h(e);let r=m();return v(r.descriptionClick())}),d(3,"Description"),o(),n(4,"button",72),f("click",function(){h(e);let r=m();return v(r.commentsClick())}),d(5),o()(),n(6,"div",73)(7,"p",74,3),d(9),o()(),n(10,"div",75),x(11,sr,2,0,"p",76),F(12,dr,1,1,"div",77,O),o()()}if(i&2){let e=m();s(5),w("Comments(",e.product.reviews.length,")"),s(),c("hidden",!e.description),s(3),_(e.product.description),s(),c("hidden",!e.comments),s(),xe(11,e.product.reviews.length===0?11:-1),s(),T(e.product.reviews)}}var jt=(()=>{let l=class l{addQuantity(t){this.quantity=this.quantity-t,this.quantity===0&&(this.quantity=1),this.quantity===1&&(this.isBuy2Selected=null)}descriptionClick(){this.description=!0,this.comments=!1}commentsClick(){this.description=!1,this.comments=!0}addToWishlist(t){this.authService.addToUserWishList(t)}addToUserCart(t){this.quantity<=0||this.authService.addProductToUserCart(t,this.quantity,this.coupon)}selectedCoupon(t){if(t==="FreeShipping")this.isFreeShippingSelected?(this.isFreeShippingSelected=null,this.isCustomSelected=null,this.isBuy2Selected=null,this.coupon=""):(this.coupon="FreeShipping",this.isBuy2Selected=!1,this.isCustomSelected=!1,this.isFreeShippingSelected=!0);else if(t==="50OffOneProduct"){if(this.quantity<2){this.toastr.info("You must add 2 or more products to use this coupon","Coupon info");return}this.isBuy2Selected?(this.isFreeShippingSelected=null,this.isCustomSelected=null,this.isBuy2Selected=null,this.coupon=void 0):(this.coupon="50OffOneProduct",this.isFreeShippingSelected=!1,this.isCustomSelected=!1,this.isBuy2Selected=!0)}else this.isCustomSelected?(this.isFreeShippingSelected=null,this.isCustomSelected=null,this.isBuy2Selected=null,this.coupon=void 0):(this.coupon=this.product.coupon.discount.toString(),this.isFreeShippingSelected=!1,this.isBuy2Selected=!1,this.isCustomSelected=!0)}verifyExistingCouponInCart(){this.authService.userCartObservable.pipe(I(this.destroy$)).subscribe(t=>{t&&(t.some(a=>a.productId===this.product.id&&a.discountName)?this.couponExists=!0:(this.couponExists=null,this.isBuy2Selected=null,this.isCustomSelected=null,this.isFreeShippingSelected=null,this.coupon=void 0))})}calculateStarRating(t){return t.accumulated/t.votes}constructor(t,r,a,u,S){this.activatedRoute=t,this.productsService=r,this.authService=a,this.toastr=u,this.spinnerService=S,this.quantity=1,this.description=!0,this.comments=!1,this.destroy$=new U,this.isFreeShippingSelected=null,this.isBuy2Selected=null,this.isCustomSelected=null,this.couponExists=null}ngOnInit(){this.spinnerService.show(),this.activatedRoute.params.pipe(_e(({id:t})=>this.productsService.loadProductById(t))).pipe(I(this.destroy$),be(()=>this.spinnerService.hide())).subscribe({next:t=>{this.product=t,this.verifyExistingCouponInCart()},error:t=>{$(t,this.toastr),console.log(t)}})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}};l.\u0275fac=function(r){return new(r||l)(g(ke),g(W),g(L),g(R),g(me))},l.\u0275cmp=k({type:l,selectors:[["app-product"]],decls:5,vars:2,consts:[["freeShipping",""],["buy2",""],["custom",""],["descriptionn",""],["class","flex flex-col mt-36 mx-4 lg:flex-row lg:mx-20",4,"ngIf"],["class","",4,"ngIf"],[1,"mt-5"],[1,"mt-10"],[1,"flex","flex-col","mt-36","mx-4","lg:flex-row","lg:mx-20"],[1,"flex","flex-col","items-center","md:flex-row","md:justify-evenly","lg:flex-col"],["data-lightbox","image-group","data-title","Image",3,"href"],["alt","thumbnail",1,"w-72","h-72","rounded-md","object-cover","x:w-96","x:h-96","lg:w-[600px]","lg:h-[400]","lg:hover:scale-[1.03]","transition","ease-in-out","duration-300",3,"src"],[1,"flex","justify-evenly","items-center","mt-4","gap-4","md:flex-col","lg:flex-row"],[1,"mt-4","lg:ml-10","lg:w-[60%]"],[1,"font-semibold","text-3xl","dark:text-white","break-words","overflow-hidden"],[1,"flex","items-center","mt-2"],[1,"text-2xl","fa-solid","fa-star","transition","ease-in-out","duration-200","dark:text-gray-400",3,"ngClass"],[1,"flex","items-center"],["class","text-base font-bold mx-1 dark:text-white",4,"ngIf"],["class","text-xs font-bold dark:text-white",4,"ngIf"],["class","text-xs font-bold dark:text-white",3,"ngClass",4,"ngIf"],[1,"text-sm","mt-5","font-medium","x:text-base","dark:text-white"],[1,"bg-cyan-300","px-1","text-base","text-black","font-semibold","rounded-lg","x:text-lg"],[1,"flex","flex-col","justify-start"],[1,"font-bold","text-red-600","pt-1","lg:mt-2","text-base"],[1,"text-5xl"],["class","text-red-600 font-bold text-base",4,"ngIf"],["class","text-red-600 font-bold",4,"ngIf"],[1,"mb-5"],["class","font-bold dark:text-white",4,"ngIf"],["class","font-bold bg-cyan-300 px-2 rounded-lg w-max text-sm x:text-base",4,"ngIf"],["class","flex flex-col",4,"ngIf"],[1,"flex","justify-center","gap-2"],[1,"bg-gray-300","font-bold","border-black","border-2","py-1","px-4","rounded-full","lg:rounded-md"],[1,"bg-cyan-300","font-bold","border-black","border-2","py-1","px-4","rounded-full","lg:rounded-md"],["for","quantity",1,"mr-2","dark:text-white","font-bold"],[1,"flex","items-center","justify-center","bg-gray-300","w-max","rounded-lg","my-3"],[3,"ngClass"],[1,"cursor-pointer","fa-solid","px-1","rounded-full","fa-minus","select-none",3,"click"],["id","quantity","type","text","disabled","",1,"bg-gray-300","select-none","w-5","font-bold",3,"value"],[1,"cursor-pointer","px-1","rounded-full","fa-solid","fa-plus","select-none",3,"click"],[1,"flex","flex-col"],[1,"grid","grid-cols-2","w-full","gap-2","items-center","my-5"],[1,"flex-1","border-2","text-xs","border-black","dark:hover:text-cyan-300","rounded-2xl","py-2","px-5","font-semibold","md:px-14","transition","ease-in-out","duration-300","dark:text-white","dark:hover:border-cyan-300",3,"click"],[1,"fa-solid","fa-cart-plus","mr-3","x:text-base"],[1,"flex-1","text-xs","inline-block","items-center","font-semibold","bg-gray-300","py-2","rounded-full","lg:hover:bg-gray-400","transition","ease-in-out","duration-300","x:text-base",3,"click"],[1,"fa-regular","fa-heart","mr-3"],[1,"hidden","text-center","text-sm","font-medium","my-7","py-2","px-4","rounded-lg","border-2","border-black","bg-cyan-300","x:text-xl"],["alt","thumbnail",1,"w-24","h-24","object-cover","border-black","dark:border-cyan-300","border-2","rounded-xl","x:w-36","x:h-36","md:w-40","md:h-40","lg:h-28","lg:w-28","lg:hover:scale-[1.06]","transition","ease-in-out","duration-300",3,"src"],[1,"text-base","font-bold","mx-1","dark:text-white"],[1,"text-xs","font-bold","dark:text-white"],[4,"ngIf"],[1,"text-xs","font-bold","dark:text-white",3,"ngClass"],[1,"text-red-600","font-bold","text-base"],[1,"text-red-600","font-bold"],[1,"text-2xl"],[1,"font-bold","dark:text-white"],[1,"font-bold","bg-cyan-300","px-2","rounded-lg","w-max","text-sm","x:text-base"],["value","FreeShipping","class","mb-1 font-medium bg-gradient-to-r transition-all ease-in-out duration-300 from-cyan-300 via-cyan-500 to-cyan-600 px-2 border-2 border-cyan-300 rounded-lg w-max",3,"ngClass","disabled","click",4,"ngIf"],["value","50OffOneProduct","class","mb-1 font-medium bg-gradient-to-r from-cyan-300 via-cyan-500 to-cyan-600 px-2 border-2 border-cyan-300 rounded-lg w-max transition-all ease-in-out duration-300",3,"ngClass","disabled","click",4,"ngIf"],["class","font-medium bg-gradient-to-r from-cyan-300 via-cyan-500 to-cyan-600 px-2 border-2 border-cyan-300 rounded-lg w-max",3,"ngClass","disabled","value","click",4,"ngIf"],["class","dark:text-white",4,"ngIf"],["value","FreeShipping",1,"mb-1","font-medium","bg-gradient-to-r","transition-all","ease-in-out","duration-300","from-cyan-300","via-cyan-500","to-cyan-600","px-2","border-2","border-cyan-300","rounded-lg","w-max",3,"click","ngClass","disabled"],["class","fa-regular fa-circle-check text-white",4,"ngIf"],[1,"fa-regular","fa-circle-check","text-white"],["value","50OffOneProduct",1,"mb-1","font-medium","bg-gradient-to-r","from-cyan-300","via-cyan-500","to-cyan-600","px-2","border-2","border-cyan-300","rounded-lg","w-max","transition-all","ease-in-out","duration-300",3,"click","ngClass","disabled"],[1,"font-medium","bg-gradient-to-r","from-cyan-300","via-cyan-500","to-cyan-600","px-2","border-2","border-cyan-300","rounded-lg","w-max",3,"click","ngClass","disabled","value"],[1,"text-black","font-bold"],[1,"dark:text-white"],[1,""],[1,"flex","justify-evenly","md:px-3","lg:mt-10"],[1,"hover:bg-gray-300","border","border-transparent","px-10","rounded-sm","py-2","md:px-28","lg:px-56","lg:rounded-xl","dark:text-white","dark:border-white","dark:hover:text-black","transition","ease-in-out","duration-300","font-bold","text-xs","x:text-base",3,"click"],[1,"hover:bg-gray-300","border","border-transparent","px-10","rounded-sm","py-2","md:px-28","lg:px-56","lg:rounded-xl","dark:text-white","dark:hover:text-black","dark:border-white","transition","ease-in-out","duration-300","font-bold","text-xs","x:text-base",3,"click"],[3,"hidden"],[1,"p-4","text-justify","lg:mx-20","dark:text-white","break-words","overflow-hidden"],[1,"px-4","md:px-16",3,"hidden"],[1,"flex","justify-center","mt-10","font-bold","dark:text-white"],[1,"bg-gray-200","dark:bg-gray-950","mt-4","px-3","rounded-xl","border-sky-200","border-2"],["class","bg-gray-200 dark:bg-gray-950 mt-4 px-3 rounded-xl border-sky-200 border-2",4,"ngIf"],[1,"fa-regular","fa-user","bg-cyan-300","p-2","rounded-full","mt-3","mr-2","dark:text-black"],[1,"flex","flex-col","items-center","justify-center"],[1,"text-base","dark:text-white"],[1,"flex","items-center","ml-2"],[1,"text-lg","fa-solid","fa-star","transition","ease-in-out","duration-200",3,"ngClass"],[1,"font-semibold","text-xs","bg-gray-300","px-1","rounded-lg","md:text-sm"],[1,"text-sm","mt-4","text-left","mb-2","md:text-base","dark:text-white","break-words","overflow-hidden"]],template:function(r,a){r&1&&(x(0,ar,61,34,"div",4)(1,cr,14,5,"div",5),p(2,"hr",6),n(3,"div",7),p(4,"app-products"),o()),r&2&&(c("ngIf",a.product),s(),c("ngIf",a.product))},dependencies:[q,V,X,ft,Oe]});let i=l;return i})();var pr=i=>({"bg-gradient-to-r from-cyan-300 via-cyan-500 to-cyan-700":i}),mr=i=>({"bg-gradient-to-r from-cyan-400 via-cyan-500 to-cyan-600":i}),ur=i=>({"line-through decoration-2":i}),fr=i=>["/alexpress/product",i],je=i=>({"text-yellow-400":i});function xr(i,l){i&1&&(n(0,"p",5),d(1,"You haven't done an order yet"),o())}function gr(i,l){if(i&1&&p(0,"img",40),i&2){let e=m().$implicit;c("routerLink",y(2,fr,e.productId))("src",e.imageUrl,E)}}function hr(i,l){if(i&1&&p(0,"img",41),i&2){let e=m().$implicit;c("src",e.imageUrl,E)}}function vr(i,l){if(i&1&&(n(0,"p",42),d(1),o()),i&2){let e=m().$implicit;s(),_(e.couponName)}}function br(i,l){i&1&&(n(0,"p",43),d(1,"This product is not availabe now"),o())}function _r(i,l){i&1&&(n(0,"p",44),d(1,"0$"),o())}function yr(i,l){if(i&1&&(n(0,"div")(1,"div",27),x(2,gr,1,4,"img",28)(3,hr,1,1,"img",29),n(4,"p",30),d(5),o(),x(6,vr,2,1,"p",31),o(),n(7,"div",32),x(8,br,2,0,"p",33),n(9,"small",34),d(10,"USD"),n(11,"p",35),d(12),o(),d(13,"$"),o()(),n(14,"div",36)(15,"small",37),d(16,"Shipping"),n(17,"p",38),d(18),o()(),x(19,_r,2,0,"p",39),o()()),i&2){let e=l.$implicit;s(),c("ngClass",y(11,pr,e.couponName)),s(),c("ngIf",!e.isDeleted),s(),c("ngIf",e.isDeleted),s(),c("ngClass",y(13,mr,e.couponName)),s(),_(e.quantity),s(),c("ngIf",e.couponName),s(2),c("ngIf",e.isDeleted),s(4),_(e.price),s(3),c("ngClass",y(15,ur,e.couponName==="FreeShipping")),s(3),_(e.shippingPrice),s(),c("ngIf",e.couponName==="FreeShipping")}}function Sr(i,l){if(i&1){let e=C();n(0,"button",45),f("click",function(){h(e);let r=m(2);return v(r.OnRateOrder())}),d(1,"Rate and review this order"),o()}}function Cr(i,l){i&1&&(n(0,"p",46),d(1,"Already rated"),p(2,"i",47),o())}function kr(i,l){i&1&&p(0,"div",48)}function wr(i,l){if(i&1){let e=C();n(0,"div",49)(1,"div",50)(2,"div",51)(3,"div")(4,"p",52),d(5,"Rate your order"),o(),n(6,"div")(7,"button",53),f("click",function(){h(e);let r=m(2);return v(r.rateProduct(1))})("mouseover",function(){h(e);let r=m(2);return v(r.mouseHover(1))})("mouseout",function(){h(e);let r=m(2);return v(r.mouseHover(0))}),p(8,"i",54),o(),n(9,"button",53),f("click",function(){h(e);let r=m(2);return v(r.rateProduct(2))})("mouseover",function(){h(e);let r=m(2);return v(r.mouseHover(2))})("mouseout",function(){h(e);let r=m(2);return v(r.mouseHover(0))}),p(10,"i",54),o(),n(11,"button",53),f("click",function(){h(e);let r=m(2);return v(r.rateProduct(3))})("mouseover",function(){h(e);let r=m(2);return v(r.mouseHover(3))})("mouseout",function(){h(e);let r=m(2);return v(r.mouseHover(0))}),p(12,"i",54),o(),n(13,"button",53),f("click",function(){h(e);let r=m(2);return v(r.rateProduct(4))})("mouseover",function(){h(e);let r=m(2);return v(r.mouseHover(4))})("mouseout",function(){h(e);let r=m(2);return v(r.mouseHover(0))}),p(14,"i",54),o(),n(15,"button",53),f("click",function(){h(e);let r=m(2);return v(r.rateProduct(5))})("mouseover",function(){h(e);let r=m(2);return v(r.mouseHover(5))})("mouseout",function(){h(e);let r=m(2);return v(r.mouseHover(0))}),p(16,"i",54),o()()(),n(17,"div",55)(18,"p",56),d(19,"Leave a comment"),o(),n(20,"textarea",57,0),f("input",function(){h(e);let r=B(21),a=B(24),u=m(2);return v(u.setTextAreaLength(r,a))}),o(),n(22,"p",9)(23,"span",null,1),d(25),o(),d(26," / 150"),o()(),n(27,"div",58)(28,"button",59),f("click",function(){h(e);let r=m(2);return v(r.OnCancelRate())}),d(29,"Cancel"),o(),n(30,"button",60),f("click",function(){h(e);let r=B(21),a=m().$implicit,u=m();return v(u.onSubmit(r,a.id))}),d(31,"Submit"),o()()()()()}if(i&2){let e=m(2);s(8),c("ngClass",y(6,je,e.rating>=1||e.hoverRating>=1)),s(2),c("ngClass",y(8,je,e.rating>=2||e.hoverRating>=2)),s(2),c("ngClass",y(10,je,e.rating>=3||e.hoverRating>=3)),s(2),c("ngClass",y(12,je,e.rating>=4||e.hoverRating>=4)),s(2),c("ngClass",y(14,je,e.rating>=5||e.hoverRating>=5)),s(9),_(e.textareaLength)}}function Ir(i,l){if(i&1&&(n(0,"div",4)(1,"div")(2,"div")(3,"h2",6),d(4,"Created on: "),n(5,"span",7),d(6),H(7,"date"),o()(),n(8,"h2",8),d(9,"Paypal transaction ID: "),n(10,"span",9),d(11),o()()(),n(12,"p",10),d(13,"Ordered products"),o(),n(14,"div",11),F(15,yr,20,17,"div",null,ee),o()(),n(17,"div")(18,"div",12)(19,"h2",13),d(20,"Shipping information"),o(),n(21,"div",14)(22,"div",15)(23,"p",16),d(24,"Full name"),o(),n(25,"p",17),d(26),o()(),n(27,"div",15)(28,"p",16),d(29,"Phone"),o(),n(30,"p",18),d(31),o()()(),n(32,"div",14)(33,"div",15)(34,"p",16),d(35,"Postal code"),o(),n(36,"p",19),d(37),o()(),n(38,"div",15)(39,"p",16),d(40,"City"),o(),n(41,"p",18),d(42),o()()(),n(43,"div",14)(44,"div",15)(45,"p",16),d(46,"Residence"),o(),n(47,"p",19),d(48),o()(),n(49,"div",15)(50,"p",16),d(51,"Country"),o(),n(52,"p",18),d(53),o()()()(),n(54,"div",20)(55,"p",21),d(56,"Summary: "),n(57,"span",22),d(58),o()(),x(59,Sr,2,0,"button",23)(60,Cr,3,0,"p",24),o()(),x(61,kr,1,0,"div",25)(62,wr,32,16,"div",26),o()),i&2){let e=l.$implicit,t=m();s(6),_(Q(7,13,e.createdOn)),s(5),_(e.paypalTransactionId),s(4),T(e.orderedProducts),s(11),_(e.address.fullName),s(5),_(e.address.phone),s(6),_(e.address.postalCode),s(5),_(e.address.city),s(6),_(e.address.residence),s(5),_(e.address.country),s(5),w("USD $",e.summary,""),s(),c("ngIf",!t.alreadyVoted(e)),s(),c("ngIf",t.alreadyVoted(e)),s(),c("ngIf",t.isVisible),s(),c("ngIf",t.isVisible)}}var Nt=(()=>{let l=class l{setTextAreaLength(t,r){this.textareaLength=t.value.trim().length,t.value.trim().length>150?r.classList.add("text-red-600"):r.classList.remove("text-red-600")}getOrders(){this.authService.getUserOrders().pipe(I(this.destroy$)).subscribe(t=>{this.orders=t})}rateProduct(t){this.rating=t}mouseHover(t){this.hoverRating=t}onSubmit(t,r){if(this.rating===0){this.toastr.warning("You forgot to select a rating");return}if(t.value.trim().length<50){this.toastr.warning("Please, type at least 50 characters in your review");return}if(t.value.trim().length>150){this.toastr.error("You exceeded the review limit");return}let a={content:t.value.trim(),orderId:r,rating:this.rating};this.authService.submitOrderReview(a).pipe(I(this.destroy$)).subscribe({next:u=>{this.toastr.success(u.message),this.getOrders(),this.isVisible=!1},error:u=>$(u,this.toastr)})}alreadyVoted(t){return!!t.reviewContainerDto}OnRateOrder(){this.isVisible=!0}OnCancelRate(){this.isVisible=!1,this.rating=0}getDiscount(t,r,a){let u=0;return r&&r==="50OffOneProduct"?u=t*.5:r&&r.includes("%")&&(u=t*(1-a/100)),u}constructor(t,r,a){this.authService=t,this.toastr=r,this.spinner=a,this.orders=[],this.isVisible=!1,this.rating=0,this.hoverRating=0,this.textareaLength=0,this.destroy$=new U}ngAfterViewInit(){this.getOrders()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}};l.\u0275fac=function(r){return new(r||l)(g(L),g(R),g(me))},l.\u0275cmp=k({type:l,selectors:[["app-orders"]],decls:5,vars:1,consts:[["textarea",""],["limitCounter",""],[1,"text-3xl","mt-28","text-center","my-4","md:mt-36","lg:mt-40","dark:text-white"],["class","text-gray-500 text-center mt-10",4,"ngIf"],[1,"flex","bg-gray-100","dark:bg-gray-950","p-2","rounded-md","mb-5","border","border-black","w-[95%]","flex-col","mx-auto","items-center","justify-center","x:w-[80%]","md:w-[70%]","md:gap-4","md:items-center","md:justify-between","lg:w-[80%]","lg:flex-row","lg:justify-evenly"],[1,"text-gray-500","text-center","mt-10"],[1,"mb-1","dark:text-white"],[1,"bg-cyan-300","px-1","rounded-md","font-medium","dark:text-black"],[1,"dark:text-white"],[1,"font-bold"],[1,"font-semibold","mb-4","text-xl","md:text-xl","dark:text-white"],[1,"flex","gap-2","x:gap-4","items-center","justify-evenly","flex-wrap","bg-gray-300","dark:bg-black","p-3","rounded-md"],[1,"bg-gray-300","dark:bg-black","mt-3","rounded-lg","px-2","pb-1"],[1,"pt-1","font-semibold","text-xl","md:text-2xl","dark:text-white"],[1,"grid","grid-cols-2","gap-2"],[1,"flex-1"],[1,"text-xs","font-bold","md:text-lg","md:font-medium","dark:text-cyan-300"],[1,"text-xs","font-","line-clamp-1","md:text-base","dark:text-white"],[1,"text-xs","md:text-base","dark:text-white"],[1,"text-xs","line-clamp-1","md:text-base","dark:text-white"],[1,"flex","justify-evenly","items-center","w-full","gap-3","mt-3"],[1,"border-b-4","border-cyan-300","dark:text-white","text-base","x:text-lg"],[1,"font-medium","md:text-3xl","dark:text-white"],["type","button","class","px-2 text-sm x:text-base font-bold text-black bg-gradient-to-r from-cyan-300 to-cyan-500 rounded-lg border-2 border-transparent hover:border-white transition ease-in-out duration-300",3,"click",4,"ngIf"],["class","px-2 font-bold text-sm x:text-base text-black bg-gradient-to-r border-green-300 from-green-400 to-green-600 rounded-lg border-2",4,"ngIf"],["class","fixed inset-0 bg-black opacity-30 z-[999]",4,"ngIf"],["class","fixed flex justify-center items-center inset-0 z-[999]",4,"ngIf"],[1,"relative",3,"ngClass"],["class","w-32 cursor-pointer p-1 border-2 border-transparent h-32 x:w-28 x:h-28 md:w-32 md:h-32 object-cover","alt","product",3,"routerLink","src",4,"ngIf"],["class","w-32 p-1 border-2 border-transparent h-32 x:w-28 x:h-28 md:w-32 md:h-32 object-cover grayscale","alt","product",3,"src",4,"ngIf"],[1,"absolute","px-2","border-black","border-2","bg-cyan-300","font-bold","rounded-full","-top-2","-right-2",3,"ngClass"],["class","px-2 bottom-1 left-1 absolute text-center text-xs bg-gradient-to-r from-cyan-300 via-cyan-400 to-cyan-500 font-bold",4,"ngIf"],[1,"flex","flex-col"],["class","dark:text-cyan-300 font-bold text-xs break-normal w-32",4,"ngIf"],[1,"flex","dark:text-white","items-center","justify-start"],[1,"text-xl","font-bold","px-0.5"],[1,"flex"],[1,"dark:text-white","flex","items-center","justify-start",3,"ngClass"],[1,"text-sm","font-bold","px-0.5"],["class","text-base font-bold px-0.5 dark:text-white",4,"ngIf"],["alt","product",1,"w-32","cursor-pointer","p-1","border-2","border-transparent","h-32","x:w-28","x:h-28","md:w-32","md:h-32","object-cover",3,"routerLink","src"],["alt","product",1,"w-32","p-1","border-2","border-transparent","h-32","x:w-28","x:h-28","md:w-32","md:h-32","object-cover","grayscale",3,"src"],[1,"px-2","bottom-1","left-1","absolute","text-center","text-xs","bg-gradient-to-r","from-cyan-300","via-cyan-400","to-cyan-500","font-bold"],[1,"dark:text-cyan-300","font-bold","text-xs","break-normal","w-32"],[1,"text-base","font-bold","px-0.5","dark:text-white"],["type","button",1,"px-2","text-sm","x:text-base","font-bold","text-black","bg-gradient-to-r","from-cyan-300","to-cyan-500","rounded-lg","border-2","border-transparent","hover:border-white","transition","ease-in-out","duration-300",3,"click"],[1,"px-2","font-bold","text-sm","x:text-base","text-black","bg-gradient-to-r","border-green-300","from-green-400","to-green-600","rounded-lg","border-2"],[1,"fa-solid","fa-check","ml-2"],[1,"fixed","inset-0","bg-black","opacity-30","z-[999]"],[1,"fixed","flex","justify-center","items-center","inset-0","z-[999]"],[1,"bg-white","w-[300px]","z-50","p-4","rounded-lg"],[1,"flex","flex-col","justify-center","items-center"],[1,"font-medium","text-center"],[3,"click","mouseover","mouseout"],[1,"text-2xl","fa-solid","fa-star","transition","ease-in-out","duration-200",3,"ngClass"],[1,"mt-5"],[1,"font-medium"],[1,"border-2","border-black","px-2","py-1","resize-none","rounded-lg","w-[260px]","h-[100px]",3,"input"],[1,"flex","justify-evenly","gap-2"],["type","button",1,"px-6","mt-5","py-1","font-medium","rounded-lg","hover:border-black","border-2","border-transparent","transition","ease-in-out","duration-300",3,"click"],["type","button",1,"px-6","mt-5","py-1","font-medium","rounded-lg","bg-cyan-300","border-2","border-transparent","hover:border-black","transition","ease-in-out","duration-300",3,"click"]],template:function(r,a){r&1&&(n(0,"h1",2),d(1,"Orders history"),o(),x(2,xr,2,0,"p",3),F(3,Ir,63,15,"div",4,O)),r&2&&(s(2),c("ngIf",a.orders.length===0),s(),T(a.orders))},dependencies:[q,V,z,Oe]});let i=l;return i})();var Er=i=>["/alexpress/product",i];function Pr(i,l){i&1&&(n(0,"p",3),d(1,"Wish list is empty"),o())}function Fr(i,l){if(i&1&&p(0,"img",13),i&2){let e=m().$implicit;c("routerLink",y(2,Er,e.productId))("src",e.product.image,E)}}function Tr(i,l){if(i&1&&p(0,"img",14),i&2){let e=m().$implicit;c("src",e.product.image,E)}}function Dr(i,l){if(i&1&&(n(0,"p",15),d(1),o()),i&2){let e=m().$implicit;s(),_(e.product.title)}}function Vr(i,l){i&1&&(n(0,"p",16),d(1,"Product not available now"),o())}function jr(i,l){if(i&1){let e=C();n(0,"button",17),f("click",function(){h(e);let r=m().$implicit,a=m(2);return v(a.addToCart(r.productId))}),d(1,"Add to cart"),o()}}function Nr(i,l){if(i&1){let e=C();n(0,"div",5),x(1,Fr,1,4,"img",6)(2,Tr,1,1,"img",7),n(3,"div",8),x(4,Dr,2,1,"p",9)(5,Vr,2,0,"p",10)(6,jr,2,0,"button",11),n(7,"button",12),f("click",function(){let r=h(e).$implicit,a=m(2);return v(a.removeFromWishlist(r.id))}),d(8,"Remove from wishlist"),o()()()}if(i&2){let e=l.$implicit;s(),c("ngIf",!e.product.isDeleted),s(),c("ngIf",e.product.isDeleted),s(2),c("ngIf",!e.product.isDeleted),s(),c("ngIf",e.product.isDeleted),s(),c("ngIf",!e.product.isDeleted)}}function Lr(i,l){if(i&1&&(n(0,"div",4),F(1,Nr,9,5,"div",5,O),o()),i&2){let e=m();s(),T(e.userWishList)}}var Lt=(()=>{let l=class l{addToCart(t){this.authService.addProductToUserCart(t)}removeFromWishlist(t){this.authService.removeFromUserWishList(t)}loadWishlist(){this.dataSubscription$=this.authService.userWishListObservable.subscribe(t=>{this.userWishList=t})}constructor(t,r){this.authService=t,this.toastr=r,this.userWishList=[]}ngOnInit(){this.authService.getUserWishList(),this.loadWishlist()}ngOnDestroy(){this.dataSubscription$?.unsubscribe()}};l.\u0275fac=function(r){return new(r||l)(g(L),g(R))},l.\u0275cmp=k({type:l,selectors:[["app-wish-list"]],decls:5,vars:2,consts:[[1,"text-center","font-semibold","text-3xl","mb-10","md:mt-36","md:font-bold","mt-28","dark:text-white"],["class","text-center text-gray-400 font-medium my-20",4,"ngIf"],["class","flex flex-col w-[95%] m-auto x:w-[70%] md:w-full md:grid md:grid-cols-2 lg:w-[80%]",4,"ngIf"],[1,"text-center","text-gray-400","font-medium","my-20"],[1,"flex","flex-col","w-[95%]","m-auto","x:w-[70%]","md:w-full","md:grid","md:grid-cols-2","lg:w-[80%]"],[1,"flex","justify-evenly","mt-2","items-center","md:items-center","md:bg-gray-300","dark:bg-gray-950","md:rounded-xl","py-2","px-4","md:py-4","md:mx-4"],["class","object-cover w-28 h-28 x:w-36 rounded-lg x:h-36 md:w-36 md:h-36 lg:w-36 lg:h-36 transition ease-in-out duration-300 hover:shadow-md cursor-pointer","alt","",3,"routerLink","src",4,"ngIf"],["class","object-cover w-28 h-28 x:w-36 rounded-lg x:h-36 md:w-36 md:h-36 lg:w-36 lg:h-36 grayscale","alt","",3,"src",4,"ngIf"],[1,"flex","flex-col","justify-center","items-center"],["class","text-sm font-medium w-40 line-clamp-2 mx-2 md:w-44 md:line-clamp-3 break-words dark:text-white",4,"ngIf"],["class","font-medium mb-4 w-48 text-center text-xl dark:text-white",4,"ngIf"],["class",`py-1 px-1.5 mt-2 text-sm font-medium w-40 border-2 rounded-lg border-black dark:border-gray-950 mb-1 hover:bg-cyan-300 transition ease-in-out duration-300 dark:text-white dark:hover:text-black
            `,3,"click",4,"ngIf"],[1,"py-1","text-sm","font-medium","px-1.5","w-40","border-2","rounded-lg","border-black","bg-red-300","hover:text-white","hover:bg-red-600","transition","ease-in-out","duration-300",3,"click"],["alt","",1,"object-cover","w-28","h-28","x:w-36","rounded-lg","x:h-36","md:w-36","md:h-36","lg:w-36","lg:h-36","transition","ease-in-out","duration-300","hover:shadow-md","cursor-pointer",3,"routerLink","src"],["alt","",1,"object-cover","w-28","h-28","x:w-36","rounded-lg","x:h-36","md:w-36","md:h-36","lg:w-36","lg:h-36","grayscale",3,"src"],[1,"text-sm","font-medium","w-40","line-clamp-2","mx-2","md:w-44","md:line-clamp-3","break-words","dark:text-white"],[1,"font-medium","mb-4","w-48","text-center","text-xl","dark:text-white"],[1,"py-1","px-1.5","mt-2","text-sm","font-medium","w-40","border-2","rounded-lg","border-black","dark:border-gray-950","mb-1","hover:bg-cyan-300","transition","ease-in-out","duration-300","dark:text-white","dark:hover:text-black",3,"click"]],template:function(r,a){r&1&&(n(0,"h1",0),d(1,"Wish list"),o(),x(2,Pr,2,0,"p",1)(3,Lr,3,0,"div",2),p(4,"app-products")),r&2&&(s(2),c("ngIf",a.userWishList.length===0),s(),c("ngIf",a.userWishList.length))},dependencies:[V,z,X]});let i=l;return i})();var Or=i=>["/alexpress/product",i],$r=i=>({"select-none cursor-auto text-gray-400":i});function Mr(i,l){i&1&&(n(0,"p",6),d(1,"Your cart is empty :("),o())}function Ur(i,l){if(i&1&&(n(0,"p",21),d(1,"Discount coupon: "),n(2,"span",22),d(3),o()()),i&2){let e=m().$implicit;s(3),_(e.discountName)}}function Ar(i,l){if(i&1&&p(0,"img",23),i&2){let e=m().$implicit;c("routerLink",y(2,Or,e.productId))("src",e.product.image,E)}}function Br(i,l){if(i&1&&p(0,"img",24),i&2){let e=m().$implicit;c("src",e.product.image,E)}}function Rr(i,l){if(i&1&&(n(0,"p",25),d(1),o()),i&2){let e=m().$implicit;s(),_(e.quantity)}}function qr(i,l){if(i&1){let e=C();n(0,"button",26),f("click",function(){h(e);let r=m().$implicit,a=m(2);return v(a.addToWishList(r.id))}),d(1,"Add to wish list"),o()}}function zr(i,l){i&1&&(n(0,"p",27),d(1,"Product not available now"),o())}function Wr(i,l){if(i&1){let e=C();n(0,"div",28)(1,"span")(2,"i",29),f("click",function(){h(e);let r=m().$implicit,a=m(2);return v(a.productQuantity(r.productId,-1))}),o()(),n(3,"p",30),d(4),o(),n(5,"span")(6,"i",31),f("click",function(){h(e);let r=m().$implicit,a=m(2);return v(a.productQuantity(r.productId,1))}),o()()()}if(i&2){let e=m().$implicit;s(2),c("ngClass",y(2,$r,e.quantity===1)),s(2),_(e.quantity)}}function Hr(i,l){if(i&1&&(n(0,"p",32),d(1,"Price: "),n(2,"span",33),d(3),o(),d(4," + Shipping: "),n(5,"span",33),d(6),o()()),i&2){let e=m().$implicit;s(3),w("USD ",e.product.price,"$"),s(3),w("USD ",e.product.shippingPrice,"$")}}function Qr(i,l){if(i&1){let e=C();n(0,"div",8),x(1,Ur,4,1,"p",9),n(2,"div",10)(3,"div",11),x(4,Ar,1,4,"img",12)(5,Br,1,1,"img",13)(6,Rr,2,1,"p",14),o(),n(7,"div",15),x(8,qr,2,0,"button",16)(9,zr,2,0,"p",17),n(10,"button",18),f("click",function(){let r=h(e).$implicit,a=m(2);return v(a.deleteCartProduct(r.id))}),d(11,"Remove"),o(),x(12,Wr,7,4,"div",19)(13,Hr,7,2,"p",20),o()()()}if(i&2){let e=l.$implicit;s(),c("ngIf",e.discountName),s(3),c("ngIf",!e.product.isDeleted),s(),c("ngIf",e.product.isDeleted),s(),c("ngIf",!e.product.isDeleted),s(2),c("ngIf",!e.product.isDeleted),s(),c("ngIf",e.product.isDeleted),s(3),c("ngIf",!e.product.isDeleted),s(),c("ngIf",e.productId)}}function Gr(i,l){if(i&1&&(n(0,"div",7),F(1,Qr,14,8,"div",8,O),o()),i&2){let e=m();s(),T(e.cartProducts)}}function Yr(i,l){if(i&1&&(n(0,"div",34)(1,"p",35),d(2,"Summary: "),n(3,"span",36),d(4),H(5,"number"),o()(),n(6,"a",37),d(7,"Pay all"),o()()),i&2){let e=m();s(4),w("USD $",Q(5,1,e.summary),"")}}var Ot=(()=>{let l=class l{getUserCart(){this.authService.userCartObservable.pipe(I(this.destroy$)).subscribe(t=>{this.cartProducts=t,this.getSummary(t).then(r=>this.summary=r)})}getSummary(t){return K(this,null,function*(){let r=0;if(this.cartProducts)for(let a=0;a<t.length;a++){let u=t[a].discountName,S=t[a].product?.shippingPrice,P=t[a].quantity,D=t[a].product.price;if(u&&u==="50OffOneProduct"){let j=(P-1)*D+S+D*.5;r+=j}else if(u&&u==="FreeShipping"){let j=P*D;r+=j}else if(u&&u.includes("%")){let j=t[a].discount,he=P*D*(1-j/100)+S;r+=he}else{let j=P*D+S;r+=j}}return r})}deleteCartProduct(t){this.authService.removeFromCart(t)}productQuantity(t,r){let a=this.cartProducts.find(u=>u.productId===t);if(a.discountName==="50OffOneProduct"&&a.quantity===2&&r<0){this.toastr.info("The coupon of this product requires 2 or more.","Cannot decrease quantity");return}this.authService.modifyProductQuantity(t,r)}addToWishList(t){this.authService.addToUserWishList(t)}constructor(t,r){this.authService=t,this.toastr=r,this.cartProducts=[],this.destroy$=new U,this.token=localStorage.getItem("token")}ngOnInit(){this.authService.getUserCart(),this.getUserCart()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}};l.\u0275fac=function(r){return new(r||l)(g(L),g(R))},l.\u0275cmp=k({type:l,selectors:[["app-cart"]],decls:8,vars:3,consts:[[1,"text-center","md:hidden","font-medium","text-3xl","mt-32","mb-6","dark:text-white"],["hidden","",1,"text-center","md:block","mt-44","text-gray-400","font-medium","my-20"],[1,"md:hidden"],["class","text-center text-gray-400 font-medium my-20",4,"ngIf"],["class","flex flex-col",4,"ngIf"],["class","flex justify-evenly mb-10 items-center fixed bottom-0 left-0 w-[90%] bg-gray-200 py-1 mx-3 rounded-2xl border-sky-400 border-2 shadow-[0px_0px_7px_5px_#00000024]",4,"ngIf"],[1,"text-center","text-gray-400","font-medium","my-20"],[1,"flex","flex-col"],[1,"bg-gray-200","dark:bg-gray-950","rounded-lg","p-2","mb-4","mx-auto","max-w-[372px]"],["class","dark:text-white font-bold mb-2",4,"ngIf"],[1,"flex","justify-evenly","items-center","mx-auto","w-full","gap-2"],[1,"relative","w-full"],["class","w-40 h-32 object-cover cursor-pointer rounded-xl","alt","image",3,"routerLink","src",4,"ngIf"],["class","w-40 h-32 object-cover grayscale rounded-xl","alt","image",3,"src",4,"ngIf"],["class","absolute -top-2 -right-2 px-2 md:bottom-16 md:right-8 bg-cyan-300 rounded-full border-2 border-white font-bold text-lg",4,"ngIf"],[1,"flex","flex-col","w-full"],["class","py-1 px-3 text-sm border-2 border-black rounded-xl font-medium mb-1 hover:bg-gray-300 transition ease-in-out duration-300 dark:text-white dark:hover:text-black",3,"click",4,"ngIf"],["class","text-center font-semibold mb-2 dark:text-white",4,"ngIf"],[1,"py-1","px-3","text-sm","border-black","border-2","rounded-xl","font-medium","bg-red-300","hover:bg-red-500","hover:text-white","transition","ease-in-out","duration-300",3,"click"],["class","flex items-center justify-center bg-gray-300 w-max rounded-lg my-1",4,"ngIf"],["class","w-32 min-[400px]:w-full font-bold text-sm text-end mt-4 border-b-2 border-cyan-300 x:text-base lg:text-xl dark:text-white",4,"ngIf"],[1,"dark:text-white","font-bold","mb-2"],[1,"bg-white","px-1","rounded-lg","dark:bg-cyan-300","dark:text-black"],["alt","image",1,"w-40","h-32","object-cover","cursor-pointer","rounded-xl",3,"routerLink","src"],["alt","image",1,"w-40","h-32","object-cover","grayscale","rounded-xl",3,"src"],[1,"absolute","-top-2","-right-2","px-2","md:bottom-16","md:right-8","bg-cyan-300","rounded-full","border-2","border-white","font-bold","text-lg"],[1,"py-1","px-3","text-sm","border-2","border-black","rounded-xl","font-medium","mb-1","hover:bg-gray-300","transition","ease-in-out","duration-300","dark:text-white","dark:hover:text-black",3,"click"],[1,"text-center","font-semibold","mb-2","dark:text-white"],[1,"flex","items-center","justify-center","bg-gray-300","w-max","rounded-lg","my-1"],[1,"text-xs","cursor-pointer","fa-solid","px-1","rounded-full","fa-minus","select-none",3,"click","ngClass"],[1,"font-bold","px-2","select-none","text-xs"],[1,"text-xs","cursor-pointer","px-1","rounded-full","fa-solid","fa-plus","select-none",3,"click"],[1,"w-32","min-[400px]:w-full","font-bold","text-sm","text-end","mt-4","border-b-2","border-cyan-300","x:text-base","lg:text-xl","dark:text-white"],[1,"text-cyan-300"],[1,"flex","justify-evenly","mb-10","items-center","fixed","bottom-0","left-0","w-[90%]","bg-gray-200","py-1","mx-3","rounded-2xl","border-sky-400","border-2","shadow-[0px_0px_7px_5px_#00000024]"],[1,"font-medium","x:text-xl","md:text-2xl"],[1,"text-xl","x:text-2xl","md:text-3xl"],["routerLink","/alexpress/payment",1,"bg-cyan-300","text-lg","font-semibold","py-1","my-2","px-3","rounded-xl","hover:bg-cyan-500","transition","ease-in-out","duration-300","hover:border","border-transparent","border","hover:border-black","hover:text-white","x:px-10","x:font-bold","x:hover:border-2","x:border-2","md:px-20"]],template:function(r,a){r&1&&(n(0,"h1",0),d(1,"Your cart"),o(),n(2,"p",1),d(3,"This view is available in small devices. Use the cart window to interact with your cart :)"),o(),n(4,"div",2),x(5,Mr,2,0,"p",3)(6,Gr,3,0,"div",4)(7,Yr,8,3,"div",5),o()),r&2&&(s(5),c("ngIf",a.cartProducts===null||a.cartProducts.length===0),s(),c("ngIf",a.cartProducts!==null),s(),c("ngIf",a.summary!==0))},dependencies:[q,V,z,$e]});let i=l;return i})();var Zr=i=>({"pointer-events-none bg-gray-400 dark:bg-gray-400":i}),$t=(i,l)=>({"border-red-600 dark:border-red-600":i,"border-black dark:border-cyan-300":l});function Jr(i,l){i&1&&(n(0,"p",44),p(1,"i",45),d(2,"Drag and drop images"),o())}function Xr(i,l){i&1&&(n(0,"p",46),d(1,"or"),o())}function Kr(i,l){if(i&1){let e=C();n(0,"div",9),p(1,"img",47,0),n(3,"i",48),f("click",function(){let r=h(e).$index,a=m();return v(a.removeImage(r))}),o()()}if(i&2){let e=l.$implicit,t=B(2),r=m();s(),c("src",r.setValueToSrc(t,e),E)}}function en(i,l){if(i&1&&(n(0,"div",49),p(1,"input",50),n(2,"div"),p(3,"input",51),n(4,"span",52),d(5,"%"),o()()()),i&2){let e=m();s(),c("ngClass",te(2,$t,(e.getName==null?null:e.getName.touched)&&((e.getName==null?null:e.getName.hasError("invalidDiscountName"))||!(e.getName!=null&&e.getName.valid)),!(e.getName!=null&&e.getName.hasError("invalidDiscountName"))||(e.getName==null?null:e.getName.valid))),s(2),c("ngClass",te(5,$t,(e.getDiscount==null?null:e.getDiscount.touched)&&(e.getDiscount==null?null:e.getDiscount.hasError("invalidDiscountValue"))||(e.getDiscount==null?null:e.getDiscount.value)>100,!(e.getDiscount!=null&&e.getDiscount.hasError("invalidDiscountValue"))||(e.getDiscount==null?null:e.getDiscount.valid)))}}function tn(i,l){i&1&&(n(0,"p",53),p(1,"i",54),d(2,"Max quantity must be less than 10.000"),o())}function rn(i,l){i&1&&(n(0,"p",53),p(1,"i",55),d(2,"Shipping must be less than 10.000"),o())}function nn(i,l){i&1&&(n(0,"p",53),p(1,"i",55),d(2,"Price must be less than 50.000"),o())}function on(i,l){i&1&&(n(0,"p",53),p(1,"i",55),d(2,"Code name must have 7 characters"),o())}function an(i,l){i&1&&(n(0,"p",53),p(1,"i",55),d(2,"Discount percentage cannot be higher than 100"),o())}function sn(i,l){i&1&&p(0,"i",56)}var Mt=(()=>{let l=class l{get getShippingPrice(){return this.formulario.get("shippingPrice")}get getPrice(){return this.formulario.get("price")}get getQuantity(){return this.formulario.get("quantity")}get getName(){return this.formulario.get("coupon.name")}get getDiscount(){return this.formulario.get("coupon.discount")}checkLength(t){let r=this.formulario.get(t)?.value.length;t==="title"&&(this.titleLength=r),t==="description"&&(this.descriptionLength=r)}OnSelectedImages(t){let r=t.target.files;for(let a=0;a<r.length;a++){let u=r[a];if(u.size>5242880){this.toastr.error("Image size must be less than 5MB","File size error");continue}if(!u.type.includes("image")){this.toastr.error("That's not an image","File format error");continue}this.files.push(u)}}setValueToSrc(t,r){let a=URL.createObjectURL(r);t.setAttribute("src",a)}removeImage(t){this.files.splice(t,1)}onDropImages(t){t.preventDefault(),t.stopPropagation();let r=t.dataTransfer?.files;t.currentTarget.classList.remove("border-cyan-600","border-4"),this.addFilesToDropZone(r)}onDragOverImages(t){t.preventDefault(),t.stopPropagation();let r=t.currentTarget;r.classList.add("border-cyan-600","transition","ease-in-out","duration-300","border-4"),r.classList.remove("border-red-600")}onDragLeaveImages(t){t.preventDefault(),t.stopPropagation();let r=t.currentTarget;r.classList.add("border-black","border"),r.classList.remove("border-cyan-600","border-4")}addFilesToDropZone(t){for(let r=0;r<t.length;r++){let a=t[r];if(a.size>5242880){this.toastr.error("Image size must be less than 5MB","File size error");continue}if(!a.type.includes("image")){this.toastr.error("That's not an image","File format error");continue}this.files.includes(a)||this.files.push(a)}}onSelectedDiscount(){this.discount=!this.discount,this.discount||(this.formulario.get("coupon.discount")?.reset(),this.formulario.get("coupon.name")?.reset()),this.cdr.detectChanges()}onSelectedFreeShipping(){if(this.freeShipping=!this.freeShipping,this.freeShipping&&this.getShippingPrice?.value===0){this.toastr.info("You can't select this coupon because your shipping price is 0"),this.freeShipping=!1;return}}verifyShippingPrice(){this.formulario.get("shippingPrice")?.value===0&&(this.freeShipping=!1)}validateCouponValue(){return t=>{let r=t.value,a=!0;return this.discount?r||(a=!1):a=!0,a?null:{invalidDiscountValue:!0}}}validateCouponName(){return t=>{let r=t.value,a=!0;return this.discount?r||(a=!1):a=!0,a?null:{invalidDiscountName:!0}}}onSubmit(){if(!this.files[0]){this.toastr.error("You forgot to select an image","No image selected");return}if(this.files.length!==4){this.toastr.error("You must upload 4 images, you have uploaded "+this.files.length);return}if(!this.formulario.valid){this.toastr.error("Make sure you filled all fields correctly","Fields error"),this.formulario.markAllAsTouched();return}this.discount||(this.formulario.get("coupon.discount")?.setValue(0),this.formulario.get("coupon.name")?.setValue(""));let t={discount:this.formulario.get("coupon.discount")?.value,is50Discount:this.discount50,isDiscount:this.discount,isShippingFree:this.freeShipping,name:this.formulario.get("coupon.name")?.value};this.formulario.get("coupon")?.setValue(t),this.isVisible=!0;let r=this.files.map(a=>{let u=new FormData;return u.append("file",a),u.append("upload_preset","cloudinary_products"),this.productsService.uploadImage(u)});Ie(r).pipe(I(this.destroy$)).subscribe({next:a=>{this.urls=a.map(u=>u.secure_url),this.formulario.get("images")?.setValue(this.urls),this.safetyService.showSafety(),this.productsService.onSubmitForm(this.formulario.value).pipe(I(this.destroy$)).subscribe({next:u=>{this.toastr.success("Your product has been succesfully added"),this.formulario.reset(),this.formulario.get("conditionId")?.setValue(""),this.formulario.get("categoryId")?.setValue(""),this.files.splice(0),this.urls.splice(0),this.isVisible=!1,this.router.navigateByUrl("/alexpress/my_products"),this.safetyService.hideSafety()},error:u=>{this.safetyService.hideSafety(),this.isVisible=!1,$(u,this.toastr)}})},error:a=>{$(a,this.toastr),this.isVisible=!1}})}validateField(t){return this.formulario.get(t)?.touched&&!this.formulario.get(t)?.valid?"border-red-600 dark:border-red-600":"border-black dark:border-cyan-300"}constructor(t,r,a,u,S,P){this.fb=t,this.productsService=r,this.toastr=a,this.router=u,this.cdr=S,this.safetyService=P,this.isValid=!0,this.urls=[],this.files=[],this.titleLength=0,this.descriptionLength=0,this.isVisible=!1,this.destroy$=new U,this.discount50=!1,this.discount=!1,this.freeShipping=!1,this.formulario=this.fb.group({images:[["","","",""]],title:[null,[b.required,b.maxLength(160)]],description:[null,[b.required,b.maxLength(2e3)]],coupon:this.fb.group({is50Discount:[null],isDiscount:[null],isShippingFree:[null],name:[null,[b.minLength(7),b.maxLength(7),this.validateCouponName()]],discount:[void 0,[b.min(0),b.max(100),this.validateCouponValue()]]}),price:[null,[b.required,b.min(1),b.max(5e4)]],categoryId:["",[b.required,b.min(1)]],conditionId:["",[b.required,b.min(1)]],shippingPrice:[null,[b.required,b.min(0),b.max(1e4)]],quantity:[null,[b.required,b.min(1),b.max(9999)]]})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}};l.\u0275fac=function(r){return new(r||l)(g(pe),g(W),g(R),g(Z),g(re),g(Ue))},l.\u0275cmp=k({type:l,selectors:[["app-add-product"]],decls:78,vars:35,consts:[["img",""],[1,"mt-28","text-center","font-semibold","text-3xl","mb-7","md:mt-36","dark:text-white"],[3,"submit","formGroup"],[1,"flex","flex-col","w-[80%]","m-auto","mb-10","lg:flex-row","lg:justify-evenly","lg:w-full"],[1,"relative","flex","flex-col","justify-center","items-center","border","border-black","dark:border-cyan-300","border-dashed","h-40","p-2","x:h-56","lg:w-72","flex-wrap",3,"drop","dragover","dragleave"],[1,"flex","flex-col","items-center"],["class","font-bold dark:text-cyan-300",4,"ngIf"],["class","text-gray-500 font-medium",4,"ngIf"],[1,"flex","flex-wrap","justify-center","items-center","overflow-auto"],[1,"relative","lg:mb-10"],["multiple","","id","input-label","accept","image/*","type","file",1,"hidden",3,"change"],["for","input-label",1,"absolute","bottom-2","cursor-pointer","border","border-black","bg-cyan-300","font-medium","px-2","py-1","rounded-sm","mt-2"],[1,"flex","flex-col"],["maxlength","160","formControlName","title","type","text","placeholder","Title",1,"w-full","p-2","bg-gray-200","border","dark:text-white","dark:bg-black","dark:border-cyan-300","border-black","mt-2","outline-none","rounded-md",3,"input"],[1,"text-xs","font-bold","dark:text-gray-400"],["id","product-description-textarea","maxlength","2000","formControlName","description","type","text","placeholder","Description",1,"p-2","dark:bg-black","dark:text-white","dark:border-cyan-300","bg-gray-200","border","h-32","border-black","mt-2","outline-none","rounded-md","resize-none",3,"input"],["formGroupName","coupon",1,"mt-3"],[1,"dark:text-white","text-xs","font-medium","italic"],["for","is50Discount",1,"cursor-pointer","w-max","text-sm","font-bold","select-none",3,"click"],["id","is50Discount","formControlName","is50Discount","hidden",""],["for","isShippingFree",1,"cursor-pointer","w-max","text-sm","font-bold","select-none",3,"click"],["id","isShippingFree","formControlName","isShippingFree","hidden",""],[1,"cursor-pointer","w-max","text-sm","font-bold","select-none",3,"click"],["class","justify-start flex mb-2",4,"ngIf"],[1,"flex","justify-evenly","mt-1","x:justify-evenly"],["formControlName","price","type","number","placeholder","Price",1,"p-2","dark:bg-black","[appearance:textfield]","[&::-webkit-outer-spin-button]:appearance-none","[&::-webkit-inner-spin-button]:appearance-none","dark:text-white","dark:border-cyan-300","bg-gray-200","border","w-24","border-black","mt-2","outline-none","rounded-md"],["formControlName","categoryId",1,"px-2","dark:text-white","dark:bg-black","dark:border-cyan-300","border","border-black","rounded-sm","text-sm","outline-none","font-medium","md:text-lg","md:w-60"],["value",""],["value","1"],["value","2"],["value","3"],["value","4"],["value","5"],["value","6"],["value","7"],[1,"flex","flex-wrap","justify-evenly","mt-2","x:flex-row-reverse","x:mt-4","x:justify-evenly"],["formControlName","quantity","type","number","placeholder","Quantity",1,"p-2","dark:text-white","[appearance:textfield]","[&::-webkit-outer-spin-button]:appearance-none","[&::-webkit-inner-spin-button]:appearance-none","dark:bg-black","dark:border-cyan-300","bg-gray-200","border","border-black","mt-2","outline-none","rounded-md","w-24","lg:ml-4"],["formControlName","shippingPrice","type","number","placeholder","Shipping price",1,"dark:bg-black","w-32","dark:text-white","dark:border-cyan-300","[appearance:textfield]","[&::-webkit-outer-spin-button]:appearance-none","[&::-webkit-inner-spin-button]:appearance-none","x:block","p-2","bg-gray-200","border","x:w-32","border-black","mt-2","outline-none","rounded-md","lg:ml-4",3,"input"],["formControlName","conditionId",1,"w-full","mt-2","py-2","px-1","border","dark:bg-black","dark:border-cyan-300","dark:text-white","border-black","rounded-sm","text-sm","outline-none","font-medium","md:text-lg","md:w-60","lg:w-40"],[1,"w-[282px]","flex","flex-col","items-center","justify-center"],[1,"flex","flex-col","justify-center","mt-4"],["class"," text-red-600 font-medium mb-1",4,"ngIf"],["type","submit",1,"mt-2","bg-cyan-300","dark:bg-cyan-500","px-4","border-2","border-black","rounded-lg","font-bold","py-1",3,"ngClass"],["class","fa-solid fa-spinner ml-1 animate-spin",4,"ngIf"],[1,"font-bold","dark:text-cyan-300"],[1,"fa-solid","fa-upload","mr-2"],[1,"text-gray-500","font-medium"],["alt","image_preview",1,"w-24","h-24","object-cover","p-1",3,"src"],[1,"fa-solid","fa-xmark","hover:bg-red-500","cursor-pointer","absolute","top-8","left-8","bg-cyan-300","px-2","rounded-xl","text-2xl","opacity-60",3,"click"],[1,"justify-start","flex","mb-2"],["formControlName","name","type","text","placeholder","Code name",1,"p-1","dark:bg-black","[appearance:textfield]","[&::-webkit-outer-spin-button]:appearance-none","[&::-webkit-inner-spin-button]:appearance-none","dark:text-white","dark:border-cyan-300","bg-gray-200","border","text-sm","w-28","border-black","mt-2","outline-none","rounded-md","mr-1",3,"ngClass"],["formControlName","discount","type","number","placeholder","Discount value",1,"p-1","w-28","dark:bg-black","[appearance:textfield]","[&::-webkit-outer-spin-button]:appearance-none","[&::-webkit-inner-spin-button]:appearance-none","dark:text-white","dark:border-cyan-300","bg-gray-200","border","text-sm","border-black","mt-2","outline-none","rounded-md",3,"ngClass"],[1,"font-bold","text-xl","ml-1","dark:text-cyan-300"],[1,"text-red-600","font-medium","mb-1"],[1,"fa-solid","fa-triangle-exclamation","text-base","text-red-600","font-bold","mr-1"],[1,"fa-solid","fa-triangle-exclamation","text-red-600","font-bold","mr-1"],[1,"fa-solid","fa-spinner","ml-1","animate-spin"]],template:function(r,a){r&1&&(n(0,"h1",1),d(1,"Sell a product"),o(),n(2,"form",2),f("submit",function(){return a.onSubmit()}),n(3,"div",3)(4,"div",4),f("drop",function(S){return a.onDropImages(S)})("dragover",function(S){return a.onDragOverImages(S)})("dragleave",function(S){return a.onDragLeaveImages(S)}),n(5,"div",5),x(6,Jr,3,0,"p",6)(7,Xr,2,0,"p",7),o(),n(8,"div",8),F(9,Kr,4,1,"div",9,O),o(),n(11,"input",10),f("change",function(S){return a.OnSelectedImages(S)}),o(),n(12,"label",11),d(13,"Select product images"),o()(),n(14,"div",12)(15,"div")(16,"input",13),f("input",function(){return a.checkLength("title")}),o(),n(17,"p",14),d(18),o()(),n(19,"textarea",15),f("input",function(){return a.checkLength("description")}),o(),n(20,"p",14),d(21),o(),n(22,"div",16)(23,"p",17),d(24,"Add discount coupon (optional)"),o(),n(25,"div")(26,"label",18),f("click",function(){return a.discount50=!a.discount50}),d(27,"Buy 2, one has 50% discount"),o(),p(28,"input",19),o(),n(29,"div")(30,"label",20),f("click",function(){return a.onSelectedFreeShipping()}),d(31,"Free shipping"),o(),p(32,"input",21),o(),n(33,"div",12)(34,"p",22),f("click",function(){return a.onSelectedDiscount()}),d(35,"Customize discount"),o(),x(36,en,6,8,"div",23),o()(),n(37,"div",24),p(38,"input",25),n(39,"select",26)(40,"option",27),d(41,"Select category"),o(),n(42,"option",28),d(43,"Watches"),o(),n(44,"option",29),d(45,"Clothes"),o(),n(46,"option",30),d(47,"Shoes"),o(),n(48,"option",31),d(49,"Pet Toys"),o(),n(50,"option",32),d(51,"Phones & Tablets"),o(),n(52,"option",33),d(53,"TV & Home"),o(),n(54,"option",34),d(55,"Audio & Sound"),o()()(),n(56,"div",35),p(57,"input",36),n(58,"input",37),f("input",function(){return a.verifyShippingPrice()}),o(),n(59,"select",38)(60,"option",27),d(61,"Condition"),o(),n(62,"option",28),d(63,"Used"),o(),n(64,"option",29),d(65,"Refurbished"),o(),n(66,"option",30),d(67,"New"),o()()()(),n(68,"div",39)(69,"div",40),x(70,tn,3,0,"p",41)(71,rn,3,0,"p",41)(72,nn,3,0,"p",41)(73,on,3,0,"p",41)(74,an,3,0,"p",41),o(),n(75,"button",42),d(76,"Add product"),x(77,sn,1,0,"i",43),o()()()()),r&2&&(s(2),c("formGroup",a.formulario),s(4),c("ngIf",a.files.length===0),s(),c("ngIf",a.files.length===0),s(2),T(a.files),s(7),N(a.validateField("title")),s(2),w(" ",a.titleLength," / 160"),s(),N(a.validateField("description")),s(2),w(" ",a.descriptionLength," / 2000"),s(5),N(a.discount50?"text-cyan-300":"text-gray-500"),s(4),N(a.freeShipping?"text-cyan-300":"text-gray-500"),s(4),N(a.discount?"text-cyan-300":"text-gray-500"),s(2),c("ngIf",a.discount),s(2),N(a.validateField("price")),s(),N(a.validateField("categoryId")),s(18),N(a.validateField("quantity")),s(),N(a.validateField("shippingPrice")),s(),N(a.validateField("conditionId")),s(11),c("ngIf",(a.getQuantity==null?null:a.getQuantity.touched)&&(a.getQuantity==null?null:a.getQuantity.value)>1e4),s(),c("ngIf",(a.getShippingPrice==null?null:a.getShippingPrice.touched)&&(a.getShippingPrice==null?null:a.getShippingPrice.value)>1e4),s(),c("ngIf",(a.getPrice==null?null:a.getPrice.touched)&&(a.getPrice==null?null:a.getPrice.value)>5e4),s(),c("ngIf",(a.getName==null?null:a.getName.touched)&&!(a.getName!=null&&a.getName.valid)&&a.discount),s(),c("ngIf",(a.getDiscount==null?null:a.getDiscount.value)>100&&a.discount),s(),c("ngClass",y(33,Zr,a.isVisible)),s(2),c("ngIf",a.isVisible))},dependencies:[q,V,se,qe,ze,ne,Ae,Re,oe,ae,ce,le,de,Be]});let i=l;return i})();var ln=i=>["/alexpress/product",i],dn=i=>["/alexpress/my_products",i];function cn(i,l){i&1&&(n(0,"p",4),d(1,"You haven't added any products yet. "),n(2,"a",5),d(3,"Add one"),o()())}function pn(i,l){if(i&1){let e=C();n(0,"div",3)(1,"a",6),p(2,"img",7),o(),n(3,"div",8)(4,"h3",9),d(5),o(),n(6,"p",10),d(7,"Price: "),n(8,"span",11),d(9),o()(),n(10,"p",10),d(11,"Category: "),n(12,"span",11),d(13),o()(),n(14,"p",12),d(15),o(),n(16,"p",10),d(17,"Shipping price: "),n(18,"span",11),d(19),o()(),n(20,"p",13),d(21,"Quantity: "),n(22,"span",11),d(23),o()(),n(24,"div",14)(25,"p",15),p(26,"i",16),d(27," Edit "),o(),n(28,"p",17),f("click",function(){let r=h(e).$implicit,a=m();return v(a.removeMyProduct(r.id))}),p(29,"i",18),d(30," Remove "),o()()()()}if(i&2){let e=l.$implicit;s(),c("routerLink",y(9,ln,e.id)),s(),c("src",e.images[0],E),s(3),_(e.title),s(4),w("USD $",e.price,""),s(4),_(e.category),s(2),_(e.condition),s(4),w("USD $",e.shippingPrice,""),s(4),_(e.quantity),s(2),c("routerLink",y(11,dn,e.id))}}var Ut=(()=>{let l=class l{loadUserProducts(){this.dataSubscription$=this.authService.userProductsObservable.subscribe(t=>this.userProducts=t)}removeMyProduct(t){this.authService.removeFromMyProducts(t)}constructor(t){this.authService=t,this.userProducts=[]}ngOnInit(){this.authService.getUserProducts(),this.loadUserProducts()}ngOnDestroy(){this.dataSubscription$?.unsubscribe()}};l.\u0275fac=function(r){return new(r||l)(g(L))},l.\u0275cmp=k({type:l,selectors:[["app-my-products"]],decls:6,vars:1,consts:[[1,"text-center","text-3xl","font-medium","mt-28","mb-5","md:mt-32","lg:mt-40","dark:text-white"],["class","text-gray-400 font-medium text-center my-20",4,"ngIf"],[1,"flex","flex-col","items-center","md:flex-row","md:flex-wrap","md:justify-center","md:gap-2","md:mx-2"],[1,"flex","items-center","gap-2","w-[320px]","h-[160px]","x:w-[450px]","x:h-[200px]","md:w-[370px]","dark:border-cyan-300","border-[1px]","my-2"],[1,"text-gray-400","font-medium","text-center","my-20"],["routerLink","/alexpress/add",1,"text-black","dark:text-cyan-300","font-bold","underline"],[1,"w-full","h-full",3,"routerLink"],["alt","image",1,"w-full","h-full","object-cover",3,"src"],[1,"w-full"],[1,"dark:text-white","text-sm","x:text-base","font-bold","line-clamp-2","overflow-hidden","break-words"],[1,"dark:text-white","text-xs","x:text-sm","font-bold","line-clamp-1"],[1,"font-normal"],[1,"bg-cyan-300","font-bold","x:text-sm","rounded-lg","text-xs","w-max","px-1.5","py-.5","my-1"],[1,"dark:text-white","text-xs","x:text-sm","font-bold","line-clamp-1","mb-1.5"],[1,"flex","justify-evenly","px-2","x:gap-2"],[1,"dark:text-white","text-xs","hover:bg-cyan-300","hover:text-black","dark:hover:bg-cyan-300","dark:hover:text-black","font-bold","border-[1px]","rounded-sm","border-black","dark:border-white","px-2","cursor-pointer","x:text-sm","x:rounded-md","x:flex","x:items-center","x:gap-2",3,"routerLink"],[1,"hidden","x:block","fa-regular","fa-pen-to-square"],[1,"dark:text-white","text-xs","hover:bg-red-300","hover:text-black","dark:hover:bg-red-300","dark:hover:text-black","font-bold","border-[1px]","border-black","dark:border-white","px-2","cursor-pointer","x:text-sm","x:rounded-md","x:flex","x:items-center","x:gap-2",3,"click"],[1,"hidden","x:block","fa-regular","fa-trash-can"]],template:function(r,a){r&1&&(n(0,"h1",0),d(1,"Your products"),o(),x(2,cn,4,0,"p",1),n(3,"div",2),F(4,pn,31,13,"div",3,O),o()),r&2&&(s(2),c("ngIf",a.userProducts.length===0),s(2),T(a.userProducts))},dependencies:[V,z]});let i=l;return i})();var mn=i=>({"pointer-events-none bg-gray-400 dark:bg-gray-400":i}),At=(i,l)=>({"border-red-600 dark:border-red-600":i,"border-black dark:border-cyan-300":l});function un(i,l){i&1&&(n(0,"p",46),p(1,"i",47),d(2,"Drag and drop images"),o())}function fn(i,l){i&1&&(n(0,"p",48),d(1,"or"),o())}function xn(i,l){if(i&1){let e=C();n(0,"div",9),p(1,"img",49,0),n(3,"i",50),f("click",function(){let r=h(e).$index,a=m();return v(a.removeImage(r))}),o()()}if(i&2){let e=l.$implicit,t=B(2),r=m();s(),c("src",r.setValueToSrc(t,e),E)}}function gn(i,l){if(i&1&&(n(0,"div",51),p(1,"input",52),n(2,"div"),p(3,"input",53),n(4,"span",54),d(5,"%"),o()()()),i&2){let e=m();s(),c("ngClass",te(2,At,(e.getName==null?null:e.getName.touched)&&((e.getName==null?null:e.getName.hasError("invalidDiscountName"))||!(e.getName!=null&&e.getName.valid)),!(e.getName!=null&&e.getName.hasError("invalidDiscountName"))||(e.getName==null?null:e.getName.valid))),s(2),c("ngClass",te(5,At,(e.getDiscount==null?null:e.getDiscount.touched)&&(e.getDiscount==null?null:e.getDiscount.hasError("invalidDiscountValue"))||(e.getDiscount==null?null:e.getDiscount.value)>100,!(e.getDiscount!=null&&e.getDiscount.hasError("invalidDiscountValue"))||(e.getDiscount==null?null:e.getDiscount.valid)))}}function hn(i,l){i&1&&(n(0,"p",55),p(1,"i",56),d(2,"Max quantity must be less than 10.000"),o())}function vn(i,l){i&1&&(n(0,"p",55),p(1,"i",57),d(2,"Shipping must be less than 10.000"),o())}function bn(i,l){i&1&&(n(0,"p",55),p(1,"i",57),d(2,"Price must be less than 50.000"),o())}function _n(i,l){i&1&&(n(0,"p",55),p(1,"i",57),d(2,"Code name must have 7 characters"),o())}function yn(i,l){i&1&&(n(0,"p",55),p(1,"i",57),d(2,"Discount percentage cannot be higher than 100"),o())}function Sn(i,l){i&1&&p(0,"i",58)}var Bt=(()=>{let l=class l{loadProductById(){this.activatedRoute.params.pipe(I(this.destroy$),_e(({id:t})=>this.productsService.loadProductById(t))).subscribe(t=>{this.product=t,this.setFormValues(t);let r=t.images;this.loadImagesFromUrls(r)})}get getShippingPrice(){return this.formulario.get("shippingPrice")}get getPrice(){return this.formulario.get("price")}get getQuantity(){return this.formulario.get("quantity")}get getName(){return this.formulario.get("coupon.name")}get getDiscount(){return this.formulario.get("coupon.discount")}validateCouponValue(){return t=>{let r=t.value,a=!0;return this.discount?r||(a=!1):a=!0,a?null:{invalidDiscountValue:!0}}}validateCouponName(){return t=>{let r=t.value,a=!0;return this.discount?r||(a=!1):a=!0,a?null:{invalidDiscountName:!0}}}setFormValues(t){this.formulario.get("title")?.setValue(t.title),this.formulario.get("description")?.setValue(t.description),this.formulario.get("price")?.setValue(t.price),this.formulario.get("coupon.name")?.setValue(t.coupon.name),this.discount50=this.product.coupon.is50Discount,this.freeShipping=this.product.coupon.isShippingFree,this.discount=this.product.coupon.isDiscount,this.setCategoryValue(t.category),this.setConditionValue(t.condition),this.formulario.get("quantity")?.setValue(t.quantity),this.formulario.get("shippingPrice")?.setValue(t.shippingPrice),this.titleLength=this.formulario.get("title")?.value.length,this.descriptionLength=this.formulario.get("description")?.value.length}setCategoryValue(t){let r=this.formulario.get("categoryId");switch(t){case"Watches":r?.setValue(1);break;case"Clothes":r?.setValue(2);break;case"Shoes":r?.setValue(3);break;case"Pet Toys":r?.setValue(4);break;case"Phones & Tablets":r?.setValue(5);break;case"TV & Home":r?.setValue(6);break;case"Audio & Sound":r?.setValue(7);break}}setConditionValue(t){let r=this.formulario.get("conditionId");switch(t){case"Used":r?.setValue(1);break;case"Refurbished":r?.setValue(2);break;case"New":r?.setValue(3);break}}appendCouponToForm(){if(this.discount){if(!this.getName?.value)return this.formulario.get("coupon.name")?.setErrors({emptyName:!0}),!1;if(!this.getDiscount?.value)return this.formulario.get("coupon.discount")?.setErrors({emptyDiscount:!0}),!1}return this.discount||(this.discount=!1,this.formulario.get("coupon.discount")?.setValue(0),this.formulario.get("coupon.name")?.setValue("")),this.couponModel.isDiscount=this.discount,this.couponModel.discount=this.formulario.get("coupon.discount")?.value,this.couponModel.name=this.formulario.get("coupon.name")?.value,this.couponModel.is50Discount=this.discount50,this.couponModel.isShippingFree=this.freeShipping,this.formulario.setErrors(null),this.formulario.get("coupon")?.setValue(this.couponModel),!0}onSelectedDiscount(){this.discount=!this.discount,this.discount||(this.formulario.get("coupon.discount")?.reset(),this.formulario.get("coupon.name")?.reset()),this.cdr.detectChanges()}get shippingPrice(){return this.formulario.get("shippingPrice")}get price(){return this.formulario.get("price")}get quantity(){return this.formulario.get("quantity")}checkLength(t){let r=this.formulario.get(t)?.value.length;t==="title"&&(this.titleLength=r),t==="description"&&(this.descriptionLength=r)}loadImagesFromUrls(t){let r=t.map(a=>this.urlToFile(a));Ie(r).pipe(I(this.destroy$)).subscribe(a=>{this.files.push(...a)})}urlToFile(t){return K(this,null,function*(){let a=yield(yield fetch(t)).blob(),u=t.split("/").pop()||"file.jpg";return new File([a],u,{type:a.type})})}onSelectedFreeShipping(){if(this.freeShipping=!this.freeShipping,this.freeShipping&&this.getShippingPrice?.value===0){this.toastr.info("You can't select this coupon because your shipping price is 0"),this.freeShipping=!1;return}}verifyShippingPrice(){this.formulario.get("shippingPrice")?.value===0&&(this.freeShipping=!1)}onSelect(t){this.files.push(...t.addedFiles)}onRemove(t){this.files.splice(this.files.indexOf(t),1)}onSubmit(){if(!this.files[0]){this.toastr.error("You forgot to select an image","No image selected");return}if(this.files.length!==4){this.toastr.error("You must upload 4 images, you have uploaded "+this.files.length);return}if(!this.appendCouponToForm()){this.toastr.error("Make sure you filled all fields correctly","Fields error");return}if(!this.formulario.valid){this.toastr.error("Make sure you filled all fields correctly","Fields error"),this.formulario.markAllAsTouched();return}this.isVisible=!0;let t=this.files.map(r=>{let a=new FormData;return a.append("file",r),a.append("upload_preset","cloudinary_products"),this.productsService.uploadImage(a)});Ie(t).pipe(I(this.destroy$)).subscribe({next:r=>{this.urls=r.map(a=>a.secure_url),this.formulario.get("images")?.setValue(this.urls),this.isVisible=!1,this.authService.updateUserProduct(this.product.id,this.formulario.value),this.formulario.reset(),this.formulario.get("conditionId")?.setValue(""),this.formulario.get("categoryId")?.setValue(""),this.files.splice(0),this.urls.splice(0),this.router.navigateByUrl("alexpress/my_products")},error:r=>{this.isVisible=!1,$(r,this.toastr)}})}OnSelectedImages(t){let r=t.target.files;for(let a=0;a<r.length;a++){let u=r[a];if(u.size>5242880){this.toastr.error("Image size must be less than 5MB","File size error");continue}this.files.push(u)}}setValueToSrc(t,r){let a=URL.createObjectURL(r);t.setAttribute("src",a)}removeImage(t){this.files.splice(t,1)}onDropImages(t){t.preventDefault(),t.stopPropagation();let r=t.dataTransfer?.files;t.currentTarget.classList.remove("border-cyan-600","border-2"),this.addFilesToDropZone(r)}onDragOverImages(t){t.preventDefault(),t.stopPropagation();let r=t.currentTarget;r.classList.add("border-cyan-600","border-2"),r.classList.remove("border-red-600")}onDragLeaveImages(t){t.preventDefault(),t.stopPropagation();let r=t.currentTarget;r.classList.add("border-black","border"),r.classList.remove("border-cyan-600","border-2")}onDropZoneClick(t){t.currentTarget.click}addFilesToDropZone(t){for(let r=0;r<t.length;r++){let a=t[r];this.files.includes(a)||this.files.push(a)}}validateField(t){let r=localStorage.getItem("color-theme"),a="";return r==="light"?a=this.formulario.get(t)?.touched&&!this.formulario.get(t)?.valid?"border-red-600":"border-black":a=this.formulario.get(t)?.touched&&!this.formulario.get(t)?.valid?"dark:border-red-600":"border-cyan-300",a}constructor(t,r,a,u,S,P,D){this.fb=t,this.productsService=r,this.toastr=a,this.activatedRoute=u,this.router=S,this.authService=P,this.cdr=D,this.files=[],this.formulario=this.fb.group({images:[["","","",""]],title:[null,[b.required,b.maxLength(160)]],description:[null,[b.required,b.maxLength(2e3)]],coupon:this.fb.group({is50Discount:[null],isDiscount:[null],isShippingFree:[null],name:[null,[b.minLength(7),b.maxLength(7),this.validateCouponName()]],discount:[void 0,[b.min(0),b.max(100),this.validateCouponValue()]]}),price:[null,[b.required,b.min(1),b.max(5e4)]],categoryId:["",[b.required,b.min(1)]],conditionId:["",[b.required,b.min(1)]],shippingPrice:[null,[b.required,b.min(0),b.max(1e4)]],quantity:[null,[b.required,b.min(1),b.max(1e4)]]}),this.destroy$=new U,this.isVisible=!1,this.titleLength=0,this.descriptionLength=0,this.discount50=!1,this.discount=!1,this.freeShipping=!1,this.couponModel={is50Discount:this.discount50,isDiscount:this.discount,isShippingFree:this.freeShipping,name:this.formulario.get("coupon.name")?.value,discount:this.formulario.get("coupon.discount")?.value},this.urls=[]}ngOnInit(){this.loadProductById()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}};l.\u0275fac=function(r){return new(r||l)(g(pe),g(W),g(R),g(ke),g(Z),g(L),g(re))},l.\u0275cmp=k({type:l,selectors:[["app-edit-product"]],decls:81,vars:36,consts:[["img",""],[1,"mt-28","text-center","font-semibold","text-3xl","mb-7","md:mt-36","dark:text-white"],[3,"submit","formGroup"],[1,"flex","flex-col","w-[80%]","m-auto","mb-10","lg:flex-row","lg:justify-evenly","lg:w-full"],[1,"relative","flex","flex-col","justify-center","items-center","border","border-black","dark:border-cyan-300","border-dashed","h-40","p-2","x:h-56","lg:w-72","flex-wrap",3,"drop","dragover","dragleave"],[1,"flex","flex-col","items-center"],["class","font-bold dark:text-cyan-300",4,"ngIf"],["class","text-gray-500 font-medium",4,"ngIf"],[1,"flex","flex-wrap","justify-center","items-center","overflow-auto"],[1,"relative","lg:mb-10"],["multiple","","id","input-label","accept","image/*","type","file",1,"hidden",3,"change"],["for","input-label",1,"absolute","bottom-2","cursor-pointer","border","border-black","bg-cyan-300","font-medium","px-2","py-1","rounded-sm","mt-2"],[1,"flex","flex-col"],["maxlength","160","formControlName","title","type","text","placeholder","Title",1,"w-full","p-2","bg-gray-200","border","dark:text-white","dark:bg-black","dark:border-cyan-300","border-black","mt-2","outline-none","rounded-md",3,"input"],[1,"text-xs","font-bold","dark:text-gray-400"],["maxlength","2000","formControlName","description","type","text","placeholder","Description",1,"p-2","dark:bg-black","dark:text-white","dark:border-cyan-300","bg-gray-200","border","h-32","border-black","mt-2","outline-none","rounded-md","resize-none",3,"input"],["formGroupName","coupon",1,"mt-3"],[1,"dark:text-white","text-xs","font-medium","italic"],["for","is50Discount",1,"cursor-pointer","w-max","text-sm","font-bold","select-none",3,"click"],["id","is50Discount","formControlName","is50Discount","hidden",""],["for","isShippingFree",1,"cursor-pointer","w-max","text-sm","font-bold","select-none",3,"click"],["id","isShippingFree","formControlName","isShippingFree","hidden",""],[1,"cursor-pointer","w-max","text-sm","font-bold","select-none",3,"click"],["class","justify-start flex mb-2",4,"ngIf"],[1,"flex","justify-evenly","mt-1","x:justify-evenly"],["formControlName","price","type","number","placeholder","Price",1,"p-2","dark:bg-black","[appearance:textfield]","[&::-webkit-outer-spin-button]:appearance-none","[&::-webkit-inner-spin-button]:appearance-none","dark:text-white","dark:border-cyan-300","bg-gray-200","border","w-24","border-black","mt-2","outline-none","rounded-md"],["formControlName","categoryId",1,"px-2","dark:text-white","dark:bg-black","dark:border-cyan-300","border","border-black","rounded-sm","text-sm","outline-none","font-medium","md:text-lg","md:w-60"],["value",""],["value","1"],["value","2"],["value","3"],["value","4"],["value","5"],["value","6"],["value","7"],[1,"flex","flex-wrap","justify-evenly","mt-2","x:flex-row-reverse","x:mt-4","x:justify-evenly"],["formControlName","quantity","type","number","placeholder","Quantity",1,"p-2","dark:text-white","[appearance:textfield]","[&::-webkit-outer-spin-button]:appearance-none","[&::-webkit-inner-spin-button]:appearance-none","dark:bg-black","dark:border-cyan-300","bg-gray-200","border","border-black","mt-2","outline-none","rounded-md","w-24","lg:ml-4"],["formControlName","shippingPrice","type","number","placeholder","Shipping price",1,"dark:bg-black","w-32","dark:text-white","dark:border-cyan-300","[appearance:textfield]","[&::-webkit-outer-spin-button]:appearance-none","[&::-webkit-inner-spin-button]:appearance-none","x:block","p-2","bg-gray-200","border","x:w-32","border-black","mt-2","outline-none","rounded-md","lg:ml-4",3,"input"],["formControlName","conditionId",1,"w-full","py-2","px-1","mt-2","border","dark:bg-black","dark:border-cyan-300","dark:text-white","border-black","rounded-sm","text-sm","outline-none","font-medium","md:text-lg","md:w-60","lg:w-40"],[1,"w-[282px]","flex","flex-col","items-center","justify-center"],[1,"flex","flex-col","justify-center","mt-4"],["class"," text-red-600 font-medium mb-1",4,"ngIf"],["type","submit",1,"mt-2","bg-cyan-300","dark:bg-cyan-500","px-4","border-2","border-black","rounded-lg","font-bold","py-1",3,"ngClass"],["class","fa-solid fa-spinner ml-1 animate-spin",4,"ngIf"],["bdColor","rgba(0, 0, 0, 0.8)","size","medium","color","#029cb0","type","ball-fussion",3,"fullScreen"],[2,"color","rgb(0, 183, 255)"],[1,"font-bold","dark:text-cyan-300"],[1,"fa-solid","fa-upload","mr-2"],[1,"text-gray-500","font-medium"],["alt","image_preview",1,"w-24","h-24","object-cover","p-1",3,"src"],[1,"fa-solid","fa-xmark","hover:bg-red-500","cursor-pointer","absolute","top-8","left-8","bg-cyan-300","px-2","rounded-xl","text-2xl","opacity-60",3,"click"],[1,"justify-start","flex","mb-2"],["formControlName","name","type","text","placeholder","Code name",1,"p-1","dark:bg-black","[appearance:textfield]","[&::-webkit-outer-spin-button]:appearance-none","[&::-webkit-inner-spin-button]:appearance-none","dark:text-white","dark:border-cyan-300","bg-gray-200","border","text-sm","w-28","border-black","mt-2","outline-none","rounded-md","mr-1",3,"ngClass"],["formControlName","discount","type","number","placeholder","Discount value",1,"p-1","w-28","dark:bg-black","[appearance:textfield]","[&::-webkit-outer-spin-button]:appearance-none","[&::-webkit-inner-spin-button]:appearance-none","dark:text-white","dark:border-cyan-300","bg-gray-200","border","text-sm","border-black","mt-2","outline-none","rounded-md",3,"ngClass"],[1,"font-bold","text-xl","ml-1","dark:text-cyan-300"],[1,"text-red-600","font-medium","mb-1"],[1,"fa-solid","fa-triangle-exclamation","text-base","text-red-600","font-bold","mr-1"],[1,"fa-solid","fa-triangle-exclamation","text-red-600","font-bold","mr-1"],[1,"fa-solid","fa-spinner","ml-1","animate-spin"]],template:function(r,a){r&1&&(n(0,"h1",1),d(1,"Edit product"),o(),n(2,"form",2),f("submit",function(){return a.onSubmit()}),n(3,"div",3)(4,"div",4),f("drop",function(S){return a.onDropImages(S)})("dragover",function(S){return a.onDragOverImages(S)})("dragleave",function(S){return a.onDragLeaveImages(S)}),n(5,"div",5),x(6,un,3,0,"p",6)(7,fn,2,0,"p",7),o(),n(8,"div",8),F(9,xn,4,1,"div",9,O),o(),n(11,"input",10),f("change",function(S){return a.OnSelectedImages(S)}),o(),n(12,"label",11),d(13,"Select product images"),o()(),n(14,"div",12)(15,"div")(16,"input",13),f("input",function(){return a.checkLength("title")}),o(),n(17,"p",14),d(18),o()(),n(19,"textarea",15),f("input",function(){return a.checkLength("description")}),o(),n(20,"p",14),d(21),o(),n(22,"div",16)(23,"p",17),d(24,"Add discount coupon (optional)"),o(),n(25,"div")(26,"label",18),f("click",function(){return a.discount50=!a.discount50}),d(27,"Buy 2, one has 50% discount"),o(),p(28,"input",19),o(),n(29,"div")(30,"label",20),f("click",function(){return a.onSelectedFreeShipping()}),d(31,"Free shipping"),o(),p(32,"input",21),o(),n(33,"div",12)(34,"p",22),f("click",function(){return a.onSelectedDiscount()}),d(35,"Customize discount"),o(),x(36,gn,6,8,"div",23),o()(),n(37,"div",24),p(38,"input",25),n(39,"select",26)(40,"option",27),d(41,"Select category"),o(),n(42,"option",28),d(43,"Watches"),o(),n(44,"option",29),d(45,"Clothes"),o(),n(46,"option",30),d(47,"Shoes"),o(),n(48,"option",31),d(49,"Pet Toys"),o(),n(50,"option",32),d(51,"Phones & Tablets"),o(),n(52,"option",33),d(53,"TV & Home"),o(),n(54,"option",34),d(55,"Audio & Sound"),o()()(),n(56,"div",35),p(57,"input",36),n(58,"input",37),f("input",function(){return a.verifyShippingPrice()}),o(),n(59,"select",38)(60,"option",27),d(61,"Condition"),o(),n(62,"option",28),d(63,"Used"),o(),n(64,"option",29),d(65,"Refurbished"),o(),n(66,"option",30),d(67,"New"),o()()()(),n(68,"div",39)(69,"div",40),x(70,hn,3,0,"p",41)(71,vn,3,0,"p",41)(72,bn,3,0,"p",41)(73,_n,3,0,"p",41)(74,yn,3,0,"p",41),o(),n(75,"button",42),d(76,"Add product"),x(77,Sn,1,0,"i",43),o()()()(),n(78,"ngx-spinner",44)(79,"p",45),d(80," Saving changes... "),o()()),r&2&&(s(2),c("formGroup",a.formulario),s(4),c("ngIf",a.files.length===0),s(),c("ngIf",a.files.length===0),s(2),T(a.files),s(7),N(a.validateField("title")),s(2),w(" ",a.titleLength," / 160"),s(),N(a.validateField("description")),s(2),w(" ",a.descriptionLength," / 2000"),s(5),N(a.discount50?"text-cyan-300":"text-gray-500"),s(4),N(a.freeShipping?"text-cyan-300":"text-gray-500"),s(4),N(a.discount?"text-cyan-300":"text-gray-500"),s(2),c("ngIf",a.discount),s(2),N(a.validateField("price")),s(),N(a.validateField("categoryId")),s(18),N(a.validateField("quantity")),s(),N(a.validateField("shippingPrice")),s(),N(a.validateField("conditionId")),s(11),c("ngIf",(a.getQuantity==null?null:a.getQuantity.touched)&&(a.getQuantity==null?null:a.getQuantity.value)>1e4),s(),c("ngIf",(a.getShippingPrice==null?null:a.getShippingPrice.touched)&&(a.getShippingPrice==null?null:a.getShippingPrice.value)>1e4),s(),c("ngIf",(a.getPrice==null?null:a.getPrice.touched)&&(a.getPrice==null?null:a.getPrice.value)>5e4),s(),c("ngIf",(a.getName==null?null:a.getName.touched)&&(a.getName==null||a.getName.value==null?null:a.getName.value.length)>=1&&(a.getName==null||a.getName.value==null?null:a.getName.value.length)!==7&&a.discount),s(),c("ngIf",(a.getDiscount==null?null:a.getDiscount.touched)&&(a.getDiscount==null?null:a.getDiscount.value)>100&&a.discount),s(),c("ngClass",y(34,mn,a.isVisible)),s(2),c("ngIf",a.isVisible),s(),c("fullScreen",!0))},dependencies:[q,V,se,qe,ze,ne,Ae,Re,oe,ae,ce,le,de,Be,We]});let i=l;return i})();var Rt=(()=>{let l=class l{loadLessProducts(){this.dataSubscription$=this.productsService.loadProducts().subscribe(t=>{this.products=t.filter(r=>r.price<4)})}addToCart(t){this.authService.addProductToUserCart(t)}addToWishList(t){this.authService.addToUserWishList(t)}constructor(t,r){this.productsService=t,this.authService=r,this.products=[]}ngOnInit(){this.loadLessProducts()}ngOnDestroy(){this.dataSubscription$?.unsubscribe()}};l.\u0275fac=function(r){return new(r||l)(g(W),g(L))},l.\u0275cmp=k({type:l,selectors:[["app-less"]],decls:3,vars:1,consts:[[1,"font-bold","text-3xl","text-center","md:mt-36","my-8","mt-32","dark:text-white"],[3,"products"]],template:function(r,a){r&1&&(n(0,"h2",0),d(1,"Less than 3.99$"),o(),p(2,"app-products",1)),r&2&&(s(2),c("products",a.products))},dependencies:[X]});let i=l;return i})();var Cn=["payPalButtonContainer"],qt=(()=>{class i{constructor(e){this.zone=e}registerScript(e,t,r){let a=window[t];if(a){this.zone.run(()=>{r(a)});return}let u=document.createElement("script");u.id=this.getElemId(t),u.innerHTML="",u.onload=()=>{this.zone.run(()=>{r(window[t])})},u.src=e,u.async=!0,u.defer=!0,document.getElementsByTagName("head")[0].appendChild(u)}cleanup(e){let t=document.getElementById(this.getElemId(e));t&&t.remove()}getElemId(e){return`ngx-paypal-script-elem-${e}`}}return i.\u0275fac=function(e){return new(e||i)(Ge(Ze))},i.\u0275prov=fe({token:i,factory:i.\u0275fac}),i})(),zt=(()=>{class i{constructor(e){this.scriptService=e,this.paypalWindowName="paypal"}registerPayPalScript(e,t){this.scriptService.registerScript(this.getUrlForConfig(e),this.paypalWindowName,t)}destroyPayPalScript(){this.scriptService.cleanup(this.paypalWindowName)}getUrlForConfig(e){let t=[{name:"client-id",value:e.clientId}];return e.locale&&t.push({name:"locale",value:e.locale}),e.currency&&t.push({name:"currency",value:e.currency}),e.commit&&t.push({name:"commit",value:e.commit}),e.vault&&t.push({name:"vault",value:e.vault}),e.intent&&t.push({name:"intent",value:e.intent}),e.funding&&t.push({name:"components",value:"buttons,funding-eligibility"}),e.extraParams&&t.push(...e.extraParams),`https://www.paypal.com/sdk/js${this.getQueryString(t)}`}getQueryString(e){let t="";for(let r=0;r<e.length;r++){let a=e[r];r===0?t+="?":t+="&",t+=`${a.name}=${a.value}`}return t}}return i.\u0275fac=function(e){return new(e||i)(Ge(qt))},i.\u0275prov=fe({token:i,factory:i.\u0275fac}),i})(),Wt=(()=>{class i{constructor(e,t,r){this.paypalScriptService=e,this.cdr=t,this.ngZone=r,this.registerScript=!0,this.scriptLoaded=new st,this.ngUnsubscribe=new U,this.initializePayPal=!0}set payPalButtonContainer(e){this.payPalButtonContainerElem=e}ngOnChanges(e){this.payPalButtonContainerId||(this.payPalButtonContainerId=this.generateElementId());let t=this.config;e.config.isFirstChange()&&t&&this.registerScript&&this.initPayPalScript(t,r=>{this.payPal=r,this.doPayPalCheck()}),e.config.isFirstChange()||this.reinitialize(t)}ngOnDestroy(){this.paypalScriptService.destroyPayPalScript(),this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}ngAfterViewInit(){this.doPayPalCheck()}customInit(e){this.payPal=e,this.doPayPalCheck()}reinitialize(e){if(this.config=e,this.payPal=void 0,this.paypalScriptService.destroyPayPalScript(),this.payPalButtonContainerId=this.generateElementId(),this.initializePayPal=!0,this.payPalButtonContainerElem)try{for(;this.payPalButtonContainerElem.nativeElement.firstChild;)this.payPalButtonContainerElem.nativeElement.removeChild(this.payPalButtonContainerElem.nativeElement.firstChild)}catch(t){console.error(t)}this.cdr.detectChanges(),this.config&&(this.payPal?this.doPayPalCheck():this.initPayPalScript(this.config,t=>{this.payPal=t,this.doPayPalCheck()}))}doPayPalCheck(){this.initializePayPal&&this.config&&this.payPal&&this.payPalButtonContainerElem&&this.payPalButtonContainerElem.nativeElement.id&&(this.initializePayPal=!1,this.initPayPal(this.config,this.payPal))}initPayPalScript(e,t){this.paypalScriptService.registerPayPalScript({clientId:e.clientId,locale:e.advanced?.locale,commit:e.advanced&&e.advanced.commit?e.advanced.commit:void 0,currency:e.currency,vault:e.vault,intent:e.intent,funding:e.fundingSource!=null||e.fundingSource!=null,extraParams:e.advanced&&e.advanced.extraQueryParams?e.advanced.extraQueryParams:[]},r=>{this.scriptLoaded.next(r),t(r)})}generateElementId(){return`ngx-captcha-id-${this.generateGuid()}`}initPayPal(e,t){this.ngZone.runOutsideAngular(()=>{let r=(D,j)=>this.ngZone.run(()=>{if(e.createOrderOnClient&&e.createOrderOnServer)throw Error(`Both 'createOrderOnClient' and 'createOrderOnServer' are defined.
                    Please choose one or the other.`);if(!e.createOrderOnClient&&!e.createOrderOnServer)throw Error(`Neither 'createOrderOnClient' or 'createOrderOnServer' are defined.
                    Please define one of these to create order.`);if(e.createOrderOnClient)return j.order.create(e.createOrderOnClient(D));if(e.createOrderOnServer)return e.createOrderOnServer(D);throw Error("Invalid state for 'createOrder'.")}),a=(D,j)=>this.ngZone.run(()=>{if(e.createSubscriptionOnClient)return j.subscription.create(e.createSubscriptionOnClient(D))}),u=(D,j)=>this.ngZone.run(()=>{if(e.onShippingChange)return e.onShippingChange(D,j)}),S=Ne(Ne(Ne({style:e.style,fundingSource:void 0,onApprove:(D,j)=>this.ngZone.run(()=>{if(e.onApprove&&e.onApprove(D,j),e.authorizeOnServer)return e.authorizeOnServer(D,j);let he=e.onClientAuthorization;he&&j.order.capture().then(ti=>{this.ngZone.run(()=>{he(ti)})})}),onError:D=>{this.ngZone.run(()=>{e.onError&&e.onError(D)})},onCancel:(D,j)=>{this.ngZone.run(()=>{e.onCancel&&e.onCancel(D,j)})},onClick:(D,j)=>{this.ngZone.run(()=>{e.onClick&&e.onClick(D,j)})},onInit:(D,j)=>{this.ngZone.run(()=>{e.onInit&&e.onInit(D,j)})}},(e.createOrderOnClient||e.createOrderOnServer)&&{createOrder:r}),e.createSubscriptionOnClient&&{createSubscription:a}),e.onShippingChange&&{onShippingChange:u}),P;switch(e.fundingSource){case"PAYPAL":P=t.FUNDING.PAYPAL;break;case"CARD":P=t.FUNDING.CARD;break;case"PAYLATER":P=t.FUNDING.PAYLATER;break;case"CREDIT":P=t.FUNDING.CREDIT;break;case"VENMO":P=t.FUNDING.VENMO;break;default:break}P!=null&&(S.fundingSource=P,e.fundingSource!=="PAYPAL"&&delete S.style?.color),t.Buttons(S).render(`#${this.payPalButtonContainerId}`)})}generateGuid(){let e=new Date().getTime(),t=performance&&performance.now&&performance.now()*1e3||0;return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,r=>{let a=Math.random()*16;return e>0?(a=(e+a)%16|0,e=Math.floor(e/16)):(a=(t+a)%16|0,t=Math.floor(t/16)),(r=="x"?a:a&7|8).toString(16)})}}return i.\u0275fac=function(e){return new(e||i)(g(zt),g(re),g(Ze))},i.\u0275cmp=k({type:i,selectors:[["ngx-paypal"]],viewQuery:function(e,t){if(e&1&&lt(Cn,5),e&2){let r;dt(r=ct())&&(t.payPalButtonContainer=r.first)}},inputs:{config:"config",registerScript:"registerScript"},outputs:{scriptLoaded:"scriptLoaded"},features:[at],decls:2,vars:1,consts:[["payPalButtonContainer",""],[3,"id"]],template:function(e,t){e&1&&p(0,"div",1,0),e&2&&c("id",t.payPalButtonContainerId)},encapsulation:2,changeDetection:0}),i})(),Ht=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Se({type:i}),i.\u0275inj=ye({providers:[qt,zt],imports:[Me]}),i})();var Qt=(()=>{let l=class l{constructor(t){this.authService=t}ngOnInit(){this.authService.userCartSubject.next([]),this.authService.userCartObservable.subscribe()}};l.\u0275fac=function(r){return new(r||l)(g(L))},l.\u0275cmp=k({type:l,selectors:[["app-payment-done"]],decls:9,vars:0,consts:[[1,"mx-2","x:mx-6","md:mx-20"],[1,"mt-28","md:mt-36","text-3xl","font-bold","lg:mt-48","dark:text-white"],[1,"fa-solid","fa-check","ml-3","text-2xl","x:text-4xl","text-green-600"],[1,"text-sm","x:text-base","dark:text-white"],[1,"mt-5"],["routerLink","/alexpress/orders",1,"bg-cyan-300","font-bold","px-2","py-1","rounded-lg"]],template:function(r,a){r&1&&(n(0,"div",0)(1,"h1",1),d(2,"Your order has been successful"),p(3,"i",2),o(),n(4,"p",3),d(5,"You can check your email to see more details about your order."),o(),n(6,"div",4)(7,"a",5),d(8,"See my orders"),o()()())},dependencies:[z]});let i=l;return i})();var In=i=>({"select-none cursor-auto text-gray-400":i}),En=i=>({"pointer-events-none":i}),Gt=i=>({"text-black":i});function Pn(i,l){i&1&&(n(0,"h1",6),d(1,"Order checkout"),o())}function Fn(i,l){if(i&1&&(n(0,"p",39),d(1),o()),i&2){let e=m().$implicit;s(),_(e.discountName)}}function Tn(i,l){if(i&1){let e=C();n(0,"div",10),p(1,"img",27),n(2,"div",28)(3,"p",29),d(4),o(),x(5,Fn,2,1,"p",30),n(6,"p",31),d(7,"USD "),n(8,"span",32),d(9),o(),d(10,"$"),o(),n(11,"p",33),d(12,"Shipping "),n(13,"span",34),d(14),o(),d(15,"$"),o(),n(16,"div",35)(17,"span")(18,"i",36),f("click",function(){let r=h(e).$implicit,a=m(2);return v(a.productQuantity(r.productId,-1))}),o()(),n(19,"p",37),d(20),o(),n(21,"span")(22,"i",38),f("click",function(){let r=h(e).$implicit,a=m(2);return v(a.productQuantity(r.productId,1))}),o()()()()()}if(i&2){let e=l.$implicit;s(),c("src",e.product.image,E),s(3),_(e.product.title),s(),c("ngIf",e.discountName),s(4),_(e.product.price),s(5),_(e.product.shippingPrice),s(4),c("ngClass",y(7,In,e.quantity===1)),s(2),_(e.quantity)}}function Dn(i,l){i&1&&(n(0,"p",40),d(1,"Or select an existing address:"),o())}function Vn(i,l){if(i&1){let e=C();n(0,"div",24,0)(2,"div",41,1),f("click",function(){let r=h(e).$implicit,a=B(1),u=B(3),S=m(2);return v(S.onSelectedAddress(r.id,u,a))}),n(4,"p",42),d(5,"Residence: "),n(6,"span",43),d(7),o()(),n(8,"p",42),d(9,"Full name: "),n(10,"span",43),d(11),o()()()()}if(i&2){let e=l.$implicit,t=m(2);s(2),c("ngClass",y(5,En,t.selectedAddress)),s(2),c("ngClass",y(7,Gt,t.selectedAddress&&t.theme==="dark")),s(3),_(e.residence),s(),c("ngClass",y(9,Gt,t.selectedAddress&&t.theme==="dark")),s(3),_(e.fullName)}}function jn(i,l){i&1&&(n(0,"p",44),d(1,"Pay with"),o())}function Nn(i,l){if(i&1&&p(0,"ngx-paypal",45,2),i&2){let e=m(2);c("config",e.payPalConfig)}}function Ln(i,l){if(i&1){let e=C();n(0,"div",7)(1,"div",8)(2,"p",9),d(3,"Your order summary"),o(),F(4,Tn,23,9,"div",10,O),n(6,"div")(7,"div",11)(8,"p",12),d(9,"Total:"),o(),n(10,"p",13)(11,"span"),d(12),H(13,"number"),o()()()()(),n(14,"form",14),f("submit",function(){h(e);let r=m();return v(r.sendShippingAddress())}),n(15,"div")(16,"p",15),d(17,"Shipping information"),o(),p(18,"input",16),n(19,"div",17),p(20,"input",18)(21,"input",19),o(),p(22,"input",20),n(23,"div",17),p(24,"input",21)(25,"input",22),o()(),n(26,"div"),x(27,Dn,2,0,"p",23),F(28,Vn,12,11,"div",24,ee),o(),x(30,jn,2,0,"p",25)(31,Nn,2,1,"ngx-paypal",26),o()()}if(i&2){let e=m();s(4),T(e.userCart),s(8),w("",Q(13,11,e.summary),"$"),s(2),c("formGroup",e.paymentForm),s(4),c("ngClass",e.validateField("fullName")),s(2),c("ngClass",e.validateField("phone")),s(),c("ngClass",e.validateField("postalCode")),s(),c("ngClass",e.validateField("residence")),s(2),c("ngClass",e.validateField("country")),s(),c("ngClass",e.validateField("city")),s(2),c("ngIf",e.addresses.length>0),s(),T(e.addresses),s(2),c("ngIf",e.paymentForm.valid||e.selectedAddress),s(),c("ngIf",e.paymentForm.valid||e.selectedAddress)}}function On(i,l){i&1&&p(0,"app-payment-done")}var Yt=(()=>{let l=class l{validatePhone(){return t=>{let r=t.value;if(!r)return null;let a=!0;for(let u=0;u<r.length;u++){let S=r[u],P=parseInt(S);if(isNaN(P)){a=!1;break}}return a?null:{phoneError:!0}}}sendShippingAddress(t,r){if(this.selectedAddress)this.orderModel.createdOn=r,this.orderModel.addressId=this.addressId,this.orderModel.paypalTransactionId=t,this.orderModel.summary=this.summary,this.getCartProducts(this.userCart),this.authService.createUserOrder(this.orderModel).pipe(I(this.destroy$)).subscribe({next:a=>{this.paymentDone=!0,this.authService.sendSummaryEmail(a.orderId,this.userCredentials.email).pipe(I(this.destroy$)).subscribe({next:u=>{this.toastr.success(u.message),this.authService.userCartSubject.next([])},error:u=>{$(u,this.toastr)}}),this.toastr.success(a.message,"Done")},error:a=>$(a,this.toastr)});else{if(!this.paymentForm.valid){this.toastr.error("You forgot some fields"),this.paymentForm.markAllAsTouched();return}this.authService.createAddress(this.paymentForm).pipe(I(this.destroy$)).subscribe({next:a=>{let u=a.addedAddress;this.orderModel.createdOn=r,this.orderModel.paypalTransactionId=t,this.orderModel.summary=this.summary,this.orderModel.addressId=u,this.getCartProducts(this.userCart),this.authService.createUserOrder(this.orderModel).pipe(I(this.destroy$)).subscribe({next:S=>{this.paymentDone=!0,this.authService.sendSummaryEmail(S.orderId,this.userCredentials.email).pipe(I(this.destroy$)).subscribe({next:P=>{this.toastr.success(P.message),this.authService.userCartSubject.next([])},error:P=>$(P,this.toastr)}),this.toastr.success(S.message,"Done"),this.authService.userCartSubject.next([])},error:S=>$(S,this.toastr)})},error:a=>$(a,this.toastr)})}}validateField(t){let r=this.paymentForm.get(t);return this.theme==="light"?r?.touched&&!r.valid?"border-red-600":"border-black":r?.touched&&!r.valid?"dark:border-red-600":"border-cyan-300"}productQuantity(t,r){this.authService.modifyProductQuantity(t,r)}getUserCart(){this.authService.userCartObservable.pipe(I(this.destroy$)).subscribe(t=>{this.userCart=t,this.getSummary(t).then(r=>this.summary=r),this.cdr.detectChanges()})}getCartProducts(t){t.forEach(r=>{let a={couponName:"",discountValue:0,imageUrl:"",price:0,shippingPrice:0,productId:0,quantity:0};a.couponName=r.discountName,a.discountValue=r.discount,a.imageUrl=r.product?.image,a.price=r.product?.price,a.shippingPrice=r.product?.shippingPrice,a.quantity=r.quantity,a.productId=r.productId,this.orderedProducts.push(a)}),this.orderModel.orderedProducts=this.orderedProducts}getSummary(t){return K(this,null,function*(){let r=0;if(this.userCart)for(let a=0;a<t.length;a++){let u=t[a].discountName,S=t[a].product?.shippingPrice,P=t[a].quantity,D=t[a].product.price;if(u&&u==="50OffOneProduct"){let j=(P-1)*D+S+D*.5;r+=j}else if(u&&u==="FreeShipping"){let j=P*D;r+=j}else if(u&&u.includes("%")){let j=t[a].discount,he=P*D*(1-j/100)+S;r+=he}else{let j=P*D+S;r+=j}}return r})}getUserAddresses(){this.authService.getUserAddresses().pipe(I(this.destroy$)).subscribe(t=>{this.addresses=t})}onSelectedAddress(t,r,a){if(this.selectedAddress)return;if(this.userCart.length===0){this.router.navigate(["/alexpress/home"]),this.toastr.info("No products in cart");return}let u=r,S=a,P=document.createElement("i");P.classList.add("fa-solid","fa-check","px-1","bg-cyan-300","text-black","border-2","border-cyan-500","rounded-full"),S.appendChild(P),u.classList.add("bg-cyan-300"),this.addressId=t,this.selectedAddress=!0,this.paymentForm.reset()}initConfig(){this.payPalConfig={currency:"USD",clientId:gt.clientId,createOrderOnClient:t=>({application_context:{shipping_preference:"NO_SHIPPING"},intent:"CAPTURE",purchase_units:[{amount:{currency_code:"USD",value:this.summary.toFixed(2)}}]}),advanced:{commit:"true",extraQueryParams:[{name:"disable-funding",value:"credit,card"}]},style:{label:"paypal",tagline:!1,layout:"horizontal"},onApprove:(t,r)=>{r.order.get().then(a=>{let u=a.id,S=a.create_time;this.sendShippingAddress(u,S)})},onCancel:(t,r)=>{this.toastr.info("Payment proccess not completed"),this.showCancel=!0},onError:t=>{this.toastr.error(t||"There was an error","Error"),this.showError=!0},onClick:(t,r)=>{this.resetStatus()}}}resetStatus(){this.showCancel=!1,this.showSuccess=!1,this.showError=!1}getCurrentUserCredentials(){this.authService.getCurrentUserCredentials().pipe(I(this.destroy$)).subscribe(t=>this.userCredentials=t)}constructor(t,r,a,u,S){this.authService=t,this.fb=r,this.toastr=a,this.router=u,this.cdr=S,this.next=!1,this.addresses=[],this.userCart=[],this.summary=0,this.theme=localStorage.getItem("color-theme"),this.showSuccess=!1,this.showCancel=!1,this.showError=!1,this.destroy$=new U,this.isLoading=!1,this.paymentDone=!1,this.orderModel={paypalTransactionId:"",createdOn:"",orderedProducts:[],summary:0,addressId:0},this.paymentForm=this.fb.group({fullName:[null,[b.required,b.maxLength(40)]],phone:[null,[b.required,b.minLength(10),b.maxLength(10),this.validatePhone()]],postalCode:[null,[b.required,b.maxLength(10)]],residence:[null,[b.required,b.maxLength(60)]],country:[null,[b.required,b.maxLength(15)]],city:[null,[b.required,b.maxLength(25)]]}),this.orderId=0,this.orderedProducts=[],this.addressId=null,this.selectedAddress=!1}ngAfterViewInit(){this.getUserCart(),this.getUserAddresses()}ngOnInit(){this.getCurrentUserCredentials(),this.initConfig()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}};l.\u0275fac=function(r){return new(r||l)(g(L),g(pe),g(R),g(Z),g(re))},l.\u0275cmp=k({type:l,selectors:[["app-payment"]],decls:3,vars:3,consts:[["container",""],["reference",""],["paypalButton",""],["class","mt-32 font-bold text-3xl text-center dark:text-white md:mt-40 md:mb-10",4,"ngIf"],["class","p-2 md:grid md:grid-cols-2 md:gap-2",4,"ngIf"],[4,"ngIf"],[1,"mt-32","font-bold","text-3xl","text-center","dark:text-white","md:mt-40","md:mb-10"],[1,"p-2","md:grid","md:grid-cols-2","md:gap-2"],[1,"bg-gray-100","dark:bg-gray-950","mx-auto","w-full","max-w-[528px]","rounded-lg","px-1","mb-5","md:flex-1"],[1,"font-medium","border-b-2","border-cyan-300","mb-2","dark:text-white","p-2"],[1,"bg-white","dark:bg-black","container","flex","items-center","mx-auto","rounded-lg","p-2","gap-2","mb-2"],[1,"flex","justify-between","items-center","p-2"],[1,"text-lg","font-semibold","dark:text-white","x:text-xl","md:text-2xl"],[1,"text-lg","font-bold","dark:text-white","x:text-xl","md:text-2xl"],[1,"md:flex-1","x:w-[90%]","mx-auto",3,"submit","formGroup"],[1,"font-medium","border-b-2","border-cyan-300","mb-2","dark:text-white","md:text-2xl"],["formControlName","fullName","maxlength","40","type","text","placeholder","Full name",1,"dark:text-white","mb-1","px-2","py-1","border-2","dark:bg-black","border-black","rounded-lg","w-full",3,"ngClass"],[1,"grid","grid-cols-2","justify-center","gap-2","w-full","mb-1"],["formControlName","phone","maxlength","10","type","text","placeholder","Phone",1,"px-2","dark:text-white","py-1","border-2","[appearance:textfield]","[&::-webkit-outer-spin-button]:appearance-none","[&::-webkit-inner-spin-button]:appearance-none","dark:bg-black","border-black","rounded-lg","flex-1",3,"ngClass"],["formControlName","postalCode","maxlength","10","type","text","placeholder","Postal code",1,"px-2","[appearance:textfield]","[&::-webkit-outer-spin-button]:appearance-none","[&::-webkit-inner-spin-button]:appearance-none","dark:text-white","py-1","border-2","dark:bg-black","border-black","rounded-lg","flex-1",3,"ngClass"],["formControlName","residence","maxlength","60","type","text","placeholder","Address",1,"px-2","dark:text-white","py-1","border-2","border-black","dark:bg-black","rounded-lg","w-full","mb-1",3,"ngClass"],["formControlName","country","maxlength","15","type","text","placeholder","Country",1,"px-2","dark:text-white","py-1","border-2","border-black","dark:bg-black","rounded-lg","flex-1",3,"ngClass"],["formControlName","city","maxlength","25","type","text","placeholder","City",1,"px-2","py-1","dark:text-white","border-2","border-black","dark:bg-black","rounded-lg","flex-1",3,"ngClass"],["class","dark:text-white",4,"ngIf"],[1,"flex","items-center"],["class","italic text-cyan-400 font-bold text-lg",4,"ngIf"],[3,"config",4,"ngIf"],["alt","product image",1,"min-w-28","h-28","object-cover","rounded-lg",3,"src"],[1,"container"],[1,"text-sm","line-clamp-2","font-semibold","dark:text-white","w-full",2,"overflow-wrap","break-word","word-break","break-word"],["class","text-sm bg-cyan-300 text-black px-2 border-2 border-black rounded-lg w-max font-bold",4,"ngIf"],[1,"font-medium","dark:text-white"],[1,"font-bold","text-xl"],[1,"text-xs","font-medium","dark:text-white"],[1,"font-bold","text-lg"],[1,"flex","bg-gray-300","w-max","rounded-lg"],[1,"fa-solid","px-1","cursor-pointer","rounded-full","fa-minus","select-none",3,"click","ngClass"],[1,"font-bold","px-2","select-none"],[1,"px-1","rounded-full","fa-solid","fa-plus","select-none","cursor-pointer",3,"click"],[1,"text-sm","bg-cyan-300","text-black","px-2","border-2","border-black","rounded-lg","w-max","font-bold"],[1,"dark:text-white"],[1,"mr-1","cursor-pointer","w-max","px-2","rounded-lg","mb-2","border-2","border-gray-400",3,"click","ngClass"],[1,"text-sm","font-bold","dark:text-white",3,"ngClass"],[1,"font-normal"],[1,"italic","text-cyan-400","font-bold","text-lg"],[3,"config"]],template:function(r,a){r&1&&x(0,Pn,2,0,"h1",3)(1,Ln,32,13,"div",4)(2,On,1,0,"app-payment-done",5),r&2&&(c("ngIf",!a.paymentDone),s(),c("ngIf",!a.paymentDone),s(),c("ngIf",a.paymentDone))},dependencies:[q,V,se,ne,oe,ae,ce,le,de,Wt,Qt,$e]});let i=l;return i})();var Zt=i=>({"pointer-events-none":i});function $n(i,l){if(i&1){let e=C();n(0,"p",6),d(1,"You haven't added any address yet. "),n(2,"button",7),f("click",function(){h(e);let r=m();return r.isVisible=!0,v(r.isEdit=!1)}),d(3,"Add one"),o()()}}function Mn(i,l){if(i&1){let e=C();n(0,"p",8),f("click",function(){h(e);let r=m();return r.isVisible=!0,r.isEdit=!1,v(r.addressForm.reset())}),d(1,"Add another address"),o()}}function Un(i,l){if(i&1){let e=C();n(0,"div",4)(1,"h2",9),d(2,"Shipping information"),o(),n(3,"div",10)(4,"div",11)(5,"p",12),d(6,"Full name"),o(),n(7,"p",13),d(8),o()(),n(9,"div",11)(10,"p",12),d(11,"Phone"),o(),n(12,"p",14),d(13),o()()(),n(14,"div",10)(15,"div",11)(16,"p",12),d(17,"Postal code"),o(),n(18,"p",15),d(19),o()(),n(20,"div",11)(21,"p",12),d(22,"City"),o(),n(23,"p",14),d(24),o()()(),n(25,"div",10)(26,"div",11)(27,"p",12),d(28,"Residence"),o(),n(29,"p",15),d(30),o()(),n(31,"div",11)(32,"p",12),d(33,"Country"),o(),n(34,"p",14),d(35),o()()(),n(36,"div",16)(37,"button",17),f("click",function(){let r=h(e).$implicit,a=m();return v(a.onEditclick(r.id))}),p(38,"i",18),d(39,"Edit"),o()()()}if(i&2){let e=l.$implicit;s(8),_(e.fullName),s(5),_(e.phone),s(6),_(e.postalCode),s(5),_(e.city),s(6),_(e.residence),s(5),_(e.country)}}function An(i,l){i&1&&(n(0,"h2",44),d(1,"Add an address"),o())}function Bn(i,l){i&1&&(n(0,"h2",44),d(1,"Edit address"),o())}function Rn(i,l){i&1&&(n(0,"p",45),d(1,"Phone must have 10 numbers*"),o())}function qn(i,l){i&1&&p(0,"i",46)}function zn(i,l){if(i&1){let e=C();n(0,"div",19)(1,"div",20),f("click",function(){h(e);let r=m();return v(r.cancel())}),o(),n(2,"div",21)(3,"form",22),f("submit",function(){h(e);let r=m();return v(r.onSubmit())}),x(4,An,2,0,"h2",23)(5,Bn,2,0,"h2",23),n(6,"div",24)(7,"label",25),d(8,"Your full name"),o(),p(9,"input",26),o(),n(10,"div",10)(11,"div",27)(12,"label",28),d(13,"Postal code"),o(),p(14,"input",29),o(),n(15,"div",27)(16,"label",30),d(17,"Phone"),o(),n(18,"div",31),p(19,"input",32),x(20,Rn,2,0,"p",33),o()()(),n(21,"div",24)(22,"label",34),d(23,"Residence"),o(),p(24,"input",35),o(),n(25,"div",10)(26,"div",27)(27,"label",36),d(28,"Country"),o(),p(29,"input",37),o(),n(30,"div",27)(31,"label",38),d(32,"City"),o(),p(33,"input",39),o()(),n(34,"div",40)(35,"button",41),f("click",function(){h(e);let r=m();return v(r.cancel())}),d(36,"Cancel"),o(),n(37,"button",42),d(38,"Done "),x(39,qn,1,0,"i",43),o()()()()()}if(i&2){let e,t=m();s(3),c("formGroup",t.addressForm),s(),c("ngIf",!t.isEdit),s(),c("ngIf",t.isEdit),s(4),c("ngClass",t.validateField("fullName")),s(5),c("ngClass",t.validateField("postalCode")),s(5),c("ngClass",t.validateField("phone")),s(),c("ngIf",((e=t.addressForm.get("phone"))==null?null:e.touched)&&!((e=t.addressForm.get("phone"))!=null&&e.valid)),s(4),c("ngClass",t.validateField("residence")),s(5),c("ngClass",t.validateField("country")),s(4),c("ngClass",t.validateField("city")),s(2),c("ngClass",y(13,Zt,t.isLoading)),s(2),c("ngClass",y(15,Zt,t.isLoading)),s(2),c("ngIf",t.isLoading)}}var Jt=(()=>{let l=class l{validatePhone(){return t=>{let r=t.value;if(!r)return null;let a=!0;for(let u=0;u<r.length;u++){let S=r[u],P=parseInt(S);if(isNaN(P)){a=!1;break}}return a?null:{phoneError:!0}}}getUserAddresses(){this.authService.getUserAddresses().pipe(I(this.destroy$)).subscribe(t=>{this.addresses=t})}onEditclick(t){this.isEdit=!0,this.isVisible=!0,this.setAddressValues(t)}onSubmit(){if(!this.addressForm.valid){this.toastr.error("There are missing fields","Missing fields"),this.addressForm.markAllAsTouched();return}this.isEdit?(this.isLoading=!0,this.authService.editAddress(this.addressId,this.addressForm).pipe(I(this.destroy$)).subscribe({next:t=>{this.isVisible=!1,this.isLoading=!1,this.toastr.success(t.message),this.getUserAddresses()},error:t=>{this.isLoading=!1,$(t,this.toastr)}})):(this.isLoading=!0,this.authService.createAddress(this.addressForm).pipe(I(this.destroy$)).subscribe({next:t=>{this.isVisible=!1,this.isLoading=!1,this.toastr.success(t.message),this.getUserAddresses()},error:t=>{$(t,this.toastr),this.isLoading=!1}}))}setAddressValues(t){this.addressId=t;let r=this.addresses.find(a=>a.id===t);this.addressForm.get("fullName")?.setValue(r.fullName),this.addressForm.get("phone")?.setValue(r.phone),this.addressForm.get("postalCode")?.setValue(r.postalCode),this.addressForm.get("city")?.setValue(r.city),this.addressForm.get("residence")?.setValue(r.residence),this.addressForm.get("country")?.setValue(r.country)}cancel(){this.isVisible=!1,this.addressForm.reset()}validateField(t){let r=this.addressForm.get(t);return this.theme==="light"?!r?.valid&&r?.touched?"border-red-600":"border-black":!r?.valid&&r?.touched?"dark:border-red-600":"border-cyan-300"}constructor(t,r,a){this.authService=t,this.fb=r,this.toastr=a,this.addressForm=this.fb.group({fullName:[null,[b.required,b.maxLength(40)]],phone:[null,[b.required,b.minLength(10),b.maxLength(10),this.validatePhone()]],postalCode:[null,[b.required,b.maxLength(10)]],residence:[null,[b.required,b.maxLength(60)]],country:[null,[b.required,b.maxLength(15)]],city:[null,[b.required,b.maxLength(25)]]}),this.isLoading=!1,this.destroy$=new U,this.addresses=[],this.isVisible=!1,this.theme=localStorage.getItem("color-theme"),this.isEdit=!1}ngAfterViewInit(){this.getUserAddresses()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}};l.\u0275fac=function(r){return new(r||l)(g(L),g(pe),g(R))},l.\u0275cmp=k({type:l,selectors:[["app-addresses"]],decls:8,vars:3,consts:[[1,"text-center","font-semibold","text-3xl","mt-32","lg:mt-44","mb-10","dark:text-white"],["class","text-center text-gray-400 font-medium my-20 dark:text-white",4,"ngIf"],["class","cursor-pointer text-center text-black underline font-medium mt-5 dark:text-white",3,"click",4,"ngIf"],[1,"flex","flex-col","w-[90%]","x:w-[70%]","md:w-[80%]","justify-evenly","mx-auto","lg:w-[50%]","md:grid","md:grid-cols-2","md:gap-4"],[1,"bg-gray-300","mt-3","w-[80%]","lg:w-full","mx-auto","rounded-lg","px-2","pb-1","dark:bg-gray-950"],["class","fixed inset-0 flex justify-center items-center z-50",4,"ngIf"],[1,"text-center","text-gray-400","font-medium","my-20","dark:text-white"],[1,"text-black","font-medium","underline","dark:text-white",3,"click"],[1,"cursor-pointer","text-center","text-black","underline","font-medium","mt-5","dark:text-white",3,"click"],[1,"pt-1","font-semibold","text-xl","dark:text-white","mb-2"],[1,"grid","grid-cols-2","gap-2"],[1,"flex-1"],[1,"text-xs","font-bold","dark:text-cyan-300"],[1,"text-xs","font-","line-clamp-1","md:text-sm","dark:text-white"],[1,"text-xs","md:text-sm","dark:text-white"],[1,"text-xs","line-clamp-1","md:text-sm","dark:text-white"],[1,"w-full","flex","justify-end","mt-2"],["type","button",1,"dark:text-white","px-2","border","font-bold","border-white","dark:border-cyan-300","rounded-lg",3,"click"],[1,"fa-solid","fa-pen-to-square","mr-1","text-sm"],[1,"fixed","inset-0","flex","justify-center","items-center","z-50"],[1,"fixed","inset-0","bg-black","opacity-50",3,"click"],[1,"bg-white","dark:bg-gray-950","w-[400px]","z-10","p-4","rounded-lg"],[3,"submit","formGroup"],["class","font-semibold text-2xl text-center dark:text-white",4,"ngIf"],[1,"flex","flex-col","w-full"],["for","fullName",1,"text-xs","md:text-sm","font-bold","dark:text-white"],["formControlName","fullName","maxlength","40","autocomplete","off","id","fullName","type","text","placeholder","Full name",1,"px-2","py-0.5","bg-gray-200","rounded-lg","text-sm","border","border-black",3,"ngClass"],[1,"flex","flex-col","flex-1"],["for","postalCode dark:text-white",1,"mt-3","text-xs","md:text-sm","font-bold","dark:text-white"],["formControlName","postalCode","maxlength","10","autocomplete","off","id","postalCode","type","text","placeholder","Postal code",1,"px-2","py-0.5","bg-gray-200","rounded-lg","text-sm","border","border-black",3,"ngClass"],["for","phone",1,"mt-3","text-xs","md:text-sm","font-bold","dark:text-white"],[1,"relative"],["formControlName","phone","maxlength","10","autocomplete","off","id","phone","type","text","maxlength","10","placeholder","Phone number",1,"px-2","py-0.5","bg-gray-200","rounded-lg","text-sm","border","border-black","[appearance:textfield]","[&::-webkit-outer-spin-button]:appearance-none","[&::-webkit-inner-spin-button]:appearance-none",3,"ngClass"],["class","text-red-500 absolute -bottom-5 left-0 dark:text-red-500 font-semibold text-xs",4,"ngIf"],["for","residence",1,"mt-3","text-xs","md:text-sm","font-bold","dark:text-white"],["formControlName","residence","maxlength","60","autocomplete","off","id","residence","type","text","placeholder","Residence",1,"px-2","py-0.5","bg-gray-200","rounded-lg","text-sm","border","border-black",3,"ngClass"],["for","country",1,"mt-3","text-xs","md:text-sm","font-bold","dark:text-white"],["formControlName","country","maxlength","15","autocomplete","off","id","country","type","text","placeholder","Country",1,"px-2","py-0.5","bg-gray-200","rounded-lg","text-sm","border","border-black",3,"ngClass"],["for","city",1,"mt-3","text-xs","md:text-sm","font-bold","dark:text-white"],["formControlName","city","autocomplete","off","id","city","maxlength","25","type","text","placeholder","City",1,"px-2","py-0.5","bg-gray-200","rounded-lg","text-sm","border","border-black",3,"ngClass"],[1,"flex","justify-evenly","mt-2","w-full"],["type","button",1,"px-4","py-0.5","border-2","border-gray-200","rounded-lg","font-semibold","dark:text-white",3,"click","ngClass"],["type","submit",1,"px-4","py-0.5","bg-cyan-300","rounded-lg","font-semibold",3,"ngClass"],["class","fa fa-spinner animate-spin",4,"ngIf"],[1,"font-semibold","text-2xl","text-center","dark:text-white"],[1,"text-red-500","absolute","-bottom-5","left-0","dark:text-red-500","font-semibold","text-xs"],[1,"fa","fa-spinner","animate-spin"]],template:function(r,a){r&1&&(n(0,"h1",0),d(1,"Your addresses"),o(),x(2,$n,4,0,"p",1)(3,Mn,2,0,"p",2),n(4,"div",3),F(5,Un,40,6,"div",4,O),x(7,zn,40,17,"div",5),o()),r&2&&(s(2),c("ngIf",a.addresses.length===0&&!a.isVisible),s(),c("ngIf",a.addresses.length!==0),s(2),T(a.addresses),s(2),c("ngIf",a.isVisible))},dependencies:[q,V,se,ne,oe,ae,ce,le,de]});let i=l;return i})();var Xt=(i,l)=>{let e=Ye(L),t=Ye(Z);return e.userCartObservable.pipe(ot(r=>!r||r.length===0?t.parseUrl("/alexpress/home"):!0))};function Wn(i,l){if(i&1){let e=C();n(0,"div",5)(1,"p",11),d(2),o(),n(3,"p",12),d(4),o(),n(5,"button",13),f("click",function(){let r=h(e).$implicit,a=m(2);return v(a.disableUser(r.id))}),d(6,"Disable User"),o()()}if(i&2){let e=l.$implicit;s(2),w("Username: ",e.userName,""),s(2),w("ID: ",e.id,"")}}function Hn(i,l){if(i&1&&p(0,"img",20),i&2){let e=l.$implicit;c("src",e,E)}}function Qn(i,l){if(i&1){let e=C();n(0,"div",5)(1,"h3",14),d(2),o(),n(3,"p",15),d(4),o(),n(5,"p",16),d(6),o(),n(7,"div",17),x(8,Hn,1,1,"img",18),o(),n(9,"button",19),f("click",function(){let r=h(e).$implicit,a=m(2);return v(a.deleteProduct(r.id))}),d(10,"Delete"),o()()}if(i&2){let e=l.$implicit;s(2),_(e.title),s(2),_(e.description),s(2),w("Username: ",e.username,""),s(2),c("ngForOf",e.images)}}function Gn(i,l){if(i&1&&p(0,"img",26),i&2){let e=l.$implicit;c("src",e,E)}}function Yn(i,l){if(i&1){let e=C();n(0,"div",5)(1,"h3",21),d(2),o(),n(3,"p",22),d(4),o(),n(5,"p",23),d(6),o(),n(7,"div",24),x(8,Gn,1,1,"img",25),o(),n(9,"button",19),f("click",function(){let r=h(e).$implicit,a=m(2);return v(a.deleteProduct(r.id))}),d(10,"Delete"),o()()}if(i&2){let e=l.$implicit;s(2),_(e.title),s(2),_(e.description),s(2),w("Username: ",e.username,""),s(2),c("ngForOf",e.images)}}function Zn(i,l){if(i&1&&(n(0,"tr")(1,"td",27),d(2),o(),n(3,"td",27),d(4),o()()),i&2){let e=l.$implicit;s(2),_(e.userName),s(2),_(e.id)}}function Jn(i,l){if(i&1&&p(0,"img",33),i&2){let e=l.$implicit;c("src",e,E)}}function Xn(i,l){if(i&1){let e=C();n(0,"tr")(1,"td",28),d(2),o(),n(3,"td",29),d(4),o(),n(5,"td",27),d(6),o(),n(7,"td",27)(8,"div",30),x(9,Jn,1,1,"img",31),o()(),n(10,"td",27)(11,"button",32),f("click",function(){let r=h(e).$implicit,a=m(2);return v(a.updateProductStock(r.id))}),d(12,"Update Stock"),o()()()}if(i&2){let e=l.$implicit;s(2),_(e.title),s(2),_(e.description),s(2),_(e.username),s(3),c("ngForOf",e.images)}}function Kn(i,l){if(i&1&&(n(0,"div",1)(1,"div",2)(2,"h2",3),d(3,"User Information"),o(),n(4,"div",4),F(5,Wn,7,2,"div",5,ee),o()(),n(7,"div",2)(8,"h2",3),d(9,"Products"),o(),n(10,"div",6),F(11,Qn,11,4,"div",5,ee),o()(),n(13,"div",2)(14,"h2",3),d(15,"Products"),o(),n(16,"div",6),F(17,Yn,11,4,"div",5,ee),o()(),n(19,"div",2)(20,"h2",3),d(21,"Disabled Users"),o(),n(22,"div",7)(23,"table",8)(24,"thead")(25,"tr")(26,"th",9),d(27,"Username"),o(),n(28,"th",9),d(29,"ID"),o()()(),n(30,"tbody"),F(31,Zn,5,2,"tr",null,ee),o()()()(),n(33,"div",2)(34,"h2",3),d(35,"Update Stock"),o(),n(36,"div",7)(37,"table",10)(38,"thead")(39,"tr")(40,"th",9),d(41,"Title"),o(),n(42,"th",9),d(43,"Description"),o(),n(44,"th",9),d(45,"Username"),o(),n(46,"th",9),d(47,"Images"),o(),n(48,"th",9),d(49,"Update Stock"),o()()(),n(50,"tbody"),F(51,Xn,13,4,"tr",null,ee),o()()()()()),i&2){let e=m();s(5),T(e.users),s(6),T(e.products),s(6),T(e.deletedProducts),s(14),T(e.disabledUsers),s(20),T(e.noStockProducts)}}var Kt=(()=>{let l=class l{toggleSection(t){this.sections[t]=!this.sections[t]}getProducts(){this.productsService.getProducts().pipe(I(this.destroy$)).subscribe(t=>this.products=t)}getAll(){this.getDeletedProducts(),this.getDisabledUsers(),this.getProducts(),this.getUsers(),this.getNoStockProducts()}getUsers(){this.productsService.getUsers().pipe(I(this.destroy$)).subscribe(t=>this.users=t)}getDisabledUsers(){this.productsService.getDisabledUsers().pipe(I(this.destroy$)).subscribe(t=>this.disabledUsers=t)}getDeletedProducts(){this.productsService.getDeletedProducts().pipe(I(this.destroy$)).subscribe(t=>this.deletedProducts=t)}getNoStockProducts(){this.productsService.getNoStockProducts().pipe(I(this.destroy$)).subscribe(t=>this.noStockProducts=t)}submitPassword(){return K(this,null,function*(){let t=yield we(this.passwordService.openDialog());t&&this.productsService.submitPass(t).subscribe({next:r=>{this.getAll(),this.isAuthorized=!0},error:r=>{$(r,this.toastr),this.router.navigate(["alexpress/home"])}})})}disableUser(t){return K(this,null,function*(){(yield we(this.confirm.openDialog()))&&this.productsService.disableUser(t).pipe(I(this.destroy$)).subscribe({next:a=>{this.toastr.success(a.message),this.getUsers(),this.getDisabledUsers()},error:a=>{$(a,this.toastr),this.router.navigate(["alexpress/home"])}})})}deleteProduct(t){return K(this,null,function*(){(yield we(this.confirm.openDialog()))&&this.productsService.deleteProduct(t).pipe(I(this.destroy$)).subscribe({next:a=>{this.toastr.success(a.message),this.getDeletedProducts(),this.getProducts()},error:a=>{$(a,this.toastr),this.router.navigate(["alexpress/home"])}})})}updateProductStock(t){return K(this,null,function*(){(yield we(this.confirm.openDialog()))&&this.productsService.updateNoStockProduct(t).pipe(I(this.destroy$)).subscribe({next:a=>{this.toastr.success(a.message),this.getProducts(),this.getNoStockProducts()},error:a=>$(a,this.toastr)})})}constructor(t,r,a,u,S){this.toastr=t,this.productsService=r,this.router=a,this.passwordService=u,this.confirm=S,this.products=[],this.users=[],this.deletedProducts=[],this.disabledUsers=[],this.isAuthorized=!1,this.noStockProducts=[],this.loaded=!1,this.destroy$=new U,this.sections={products:!1,disabledUsers:!1,updateStock:!1}}ngOnInit(){this.submitPassword()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}};l.\u0275fac=function(r){return new(r||l)(g(R),g(W),g(Z),g(He),g(Qe))},l.\u0275cmp=k({type:l,selectors:[["app-manage-products"]],decls:1,vars:1,consts:[["class","container mx-auto p-4 mt-20 md:mt-32",4,"ngIf"],[1,"container","mx-auto","p-4","mt-20","md:mt-32"],[1,"mb-20"],[1,"text-2xl","font-bold","mb-4","text-gray-900","dark:text-gray-100"],[1,"grid","grid-cols-1","sm:grid-cols-2","lg:grid-cols-3","xl:grid-cols-6","gap-6"],[1,"bg-white","dark:bg-gray-800","p-4","rounded-lg","shadow-md"],[1,"grid","grid-cols-1","sm:grid-cols-2","lg:grid-cols-3","xl:grid-cols-4","gap-6"],[1,"overflow-x-auto"],[1,"min-w-full","bg-white","dark:bg-gray-800"],[1,"py-2","px-4","border-b","border-gray-200","dark:border-gray-700","text-left","text-gray-900","dark:text-gray-100"],[1,"min-w-full","bg-white","dark:bg-gray-800","text-sm"],[1,"text-sm","font-semibold","text-gray-900","dark:text-gray-100"],[1,"text-sm","text-gray-900","dark:text-gray-100"],[1,"mt-4","bg-red-500","text-white","px-1","rounded","hover:bg-red-600","w-full",3,"click"],[1,"text-base","font-semibold","mb-2","text-gray-900","dark:text-gray-100","line-clamp-2"],[1,"mb-4","text-sm","text-gray-900","dark:text-gray-100","line-clamp-3"],[1,"mb-4","text-sm","text-gray-900","dark:text-gray-100"],[1,"flex","items-center","mb-2"],["alt","Product Image","class","w-14 h-14 object-cover rounded",3,"src",4,"ngFor","ngForOf"],[1,"bg-red-500","text-white","px-4","py-2","rounded","hover:bg-red-600","w-full",3,"click"],["alt","Product Image",1,"w-14","h-14","object-cover","rounded",3,"src"],[1,"text-xl","font-semibold","mb-2","text-gray-900","dark:text-gray-100","line-clamp-2"],[1,"mb-4","text-gray-900","dark:text-gray-100","line-clamp-3"],[1,"mb-4","text-gray-900","dark:text-gray-100"],[1,"grid","grid-cols-2","gap-2","mb-4"],["alt","Product Image","class","w-full h-24 object-cover rounded",3,"src",4,"ngFor","ngForOf"],["alt","Product Image",1,"w-full","h-24","object-cover","rounded",3,"src"],[1,"py-2","px-4","border-b","border-gray-200","dark:border-gray-700","text-gray-900","dark:text-gray-100"],[1,"py-2","px-4","border-b","border-gray-200","dark:border-gray-700","text-gray-900","dark:text-gray-100","max-w-72","line-clamp-1","break-words"],[1,"py-2","px-4","border-b","border-gray-200","dark:border-gray-700","text-gray-900","dark:text-gray-100","line-clamp-4","w-64"],[1,"grid","grid-cols-4","gap-2"],["alt","Product Image","class","w-full h-16 object-cover rounded",3,"src",4,"ngFor","ngForOf"],[1,"bg-blue-500","text-white","px-4","py-2","rounded","hover:bg-blue-600",3,"click"],["alt","Product Image",1,"w-full","h-16","object-cover","rounded",3,"src"]],template:function(r,a){r&1&&x(0,Kn,53,0,"div",0),r&2&&c("ngIf",a.isAuthorized)},dependencies:[ut,V]});let i=l;return i})();var eo=[{path:"",component:Pt,children:[{path:"home",component:Tt},{path:"categories/:id",component:Dt},{path:"products",component:X},{path:"my_products",component:Ut},{path:"wish_list",component:Lt},{path:"cart",component:Ot},{path:"less",component:Rt},{path:"product/:id",component:jt},{path:"my_products/:id",component:Bt},{path:"add",component:Mt},{path:"orders",component:Nt},{path:"payment",component:Yt,canActivate:[Xt]},{path:"admin-mode",component:Kt},{path:"addresses",component:Jt},{path:"**",redirectTo:"home"}]}],ei=(()=>{let l=class l{};l.\u0275fac=function(r){return new(r||l)},l.\u0275mod=Se({type:l}),l.\u0275inj=ye({imports:[Ee.forChild(eo),Ee]});let i=l;return i})();var ws=(()=>{let l=class l{};l.\u0275fac=function(r){return new(r||l)},l.\u0275mod=Se({type:l}),l.\u0275inj=ye({imports:[Me,yt,ei,Ee,ht,_t.forRoot({type:"ball-scale-multiple"}),Ht]});let i=l;return i})();export{ws as PagesModule};
