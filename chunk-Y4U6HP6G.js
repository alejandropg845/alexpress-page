import{$ as s,$a as T,Ca as H,Da as J,E as m,Ea as N,F as p,Fa as R,Ga as q,I as M,Ia as y,K as u,L as h,Qa as V,R as a,S as n,T as d,Ta as F,Ua as A,V as f,Va as g,Wa as E,Xa as j,Za as D,bb as G,fb as K,ga as _,gb as z,ib as Q,la as Z,lb as W,o as k,oa as L,qa as I,r as S,u as v,v as C,va as U}from"./chunk-CGZ54FQP.js";var ne=o=>({"pointer-events-none":o});function se(o,t){o&1&&d(0,"i",18)}var Y=(()=>{let t=class t{logIn(){if(!this.form.valid){this.toastr.error("Fill all fields to log in","Error"),this.form.markAllAsTouched();return}this.isLoading=!0,this.dataSubscription=this.authService.logIn(this.form.value).subscribe({next:e=>{this.isLoading=!1,this.authService.token=e.token,this.router.navigateByUrl("/alexpress/home")},error:e=>{y(e,this.toastr),this.isLoading=!1}})}validateField(e){return this.theme==="light"?this.form.get(e)?.touched&&!this.form.get(e)?.valid?"border-2 border-red-500":"border-black":this.form.get(e)?.touched&&!this.form.get(e)?.valid?"dark:border-2 border-red-500":"border-black"}showPass(){this.isVisible=!this.isVisible}randomizedAccount(){let e="",r="ABCDEFGHIJKLMNOPQRSTVWXYZabcdefghiklmnopqrstvwxyz123456789",i=r.length;for(let c=0;c<5;c++)e+=r.charAt(Math.floor(Math.random()*i));let l=["example.com","test.com","mail.com"],x=l[Math.floor(Math.random()*l.length)],P=`${e}${Math.floor(Math.random()*100)}@${x}`,w="",$=8;for(let c=0;c<$;c++)w+=r.charAt(Math.floor(Math.random()*i));let b={username:e,email:P,password:w};this.dataSubscription=this.authService.register(b).pipe(k(c=>{c.ok&&(localStorage.setItem("token",c.token),this.router.navigateByUrl("/alexpress/home"))})).subscribe({next:c=>{this.toastr.success("Registered succesfully"),this.authService.token=c.token},error:c=>{y(c,this.toastr)}})}constructor(e,r,i,l,x){this.fb=e,this.authService=r,this.toastr=i,this.router=l,this.activatedRoute=x,this.form=this.fb.group({email:[null,[g.required]],password:[null,[g.required]]}),this.theme=localStorage.getItem("color-theme"),this.isLoading=!1,this.isVisible=!1}ngOnDestroy(){this.dataSubscription?.unsubscribe()}};t.\u0275fac=function(r){return new(r||t)(p(z),p(F),p(V),p(N),p(H))},t.\u0275cmp=v({type:t,selectors:[["app-login"]],decls:26,vars:12,consts:[[1,"flex","flex-col","justify-center","items-center","gap-2"],["src","/alexpress-page/assets/templates/logos/dark-mode-logo.png","alt","logo",1,"w-28","h-28","mt-10","m-auto","md:mt-0","lg:mt-5"],["routerLink","/alexpress/home",1,"font-bold","bg-cyan-300","border-2","border-cyan-400","w-max","text-black","rounded-xl","px-2","text-center","cursor-pointer","hover:shadow-inner","hover:shadow-black","transition","ease-in-out","duration-300"],[1,"font-bold","bg-white","border-2","border-gray-400","w-max","text-black","rounded-xl","px-2","text-center","cursor-pointer","hover:shadow-inner","hover:shadow-black","transition","ease-in-out","duration-300",3,"click"],[1,"flex","justify-evenly","mx-6","md:mx-auto","max-w-[720px]","rounded-2xl","bg-gray-100","dark:bg-gray-950","mt-6","py-10","md:py-5","shadow-[0px_6px_7px_3px_#00000024]"],[1,"text-3xl","text-black","font-bold","dark:text-white"],[1,"text-gray-400","mb-4","x:text-xl","lg:mt-2"],[1,"flex","flex-col","items-center",3,"submit","formGroup"],["formControlName","email","type","email","placeholder","Email",1,"border-2","p-2","font-semibold","mb-2","w-64","x:w-80","rounded-xl","outline-none","dark:bg-gray-600","dark:text-white"],[1,"relative"],["formControlName","password","type","password","placeholder","Password",1,"border-2","font-semibold","dark:bg-gray-600","dark:text-white","p-2","w-64","x:w-80","rounded-xl",3,"type"],[1,"cursor-pointer","fa-regular","fa-eye","absolute","bottom-3","right-3","dark:text-white",3,"click"],["type","submit",1,"inline-block","bg-cyan-300","w-[40%]","py-1","px-4","mt-5","font-semibold","rounded-2xl","x:w-[80%]","lg:w-full","lg:text-xl","hover:shadow-inner","hover:shadow-black","transition","ease-in-out","duration-300",3,"ngClass"],["class","fa fa-spinner animate-spin",4,"ngIf"],[1,"font-medium","mt-4","text-center","x:mt-7","dark:text-white"],["routerLink","/auth/register",1,"underline","decoration-2"],[1,"hidden","md:block"],["src","/alexpress-page/assets/images/small-shopping-cart-blue-space-space-text_185193-1490.jpg","alt","image",1,"w-64","h-72","object-cover","rounded-2xl"],[1,"fa","fa-spinner","animate-spin"]],template:function(r,i){r&1&&(a(0,"div",0),d(1,"img",1),a(2,"p",2),s(3,"Click here to go ahead with no account"),n(),a(4,"p",3),f("click",function(){return i.randomizedAccount()}),s(5,"Random account (email features not available)"),n()(),a(6,"div",4)(7,"div")(8,"h1",5),s(9,"Login"),n(),a(10,"p",6),s(11,"Type your credentials to log in"),n(),a(12,"form",7),f("submit",function(){return i.logIn()}),d(13,"input",8),a(14,"div",9),d(15,"input",10),a(16,"i",11),f("click",function(){return i.showPass()}),n()(),a(17,"button",12),s(18,"Done "),M(19,se,1,0,"i",13),n()(),a(20,"p",14),s(21,"Not a member? "),a(22,"a",15),s(23,"Register here"),n()()(),a(24,"div",16),d(25,"img",17),n()()),r&2&&(m(12),u("formGroup",i.form),m(),h(i.validateField("email")),m(2),h(i.validateField("password")),u("type",i.isVisible?"text":"password"),m(),h(i.isVisible?"fa-eye":"fa-eye-slash"),m(),u("ngClass",_(10,ne,i.isLoading)),m(2),u("ngIf",i.isLoading))},dependencies:[L,I,D,A,E,j,T,G,R]});let o=t;return o})();var le=o=>({"pointer-events-none":o});function me(o,t){o&1&&d(0,"i",19)}var ee=(()=>{let t=class t{register(){if(!this.form.valid){this.toastr.error("Please, fill all fields","Register error"),this.form.markAllAsTouched();return}this.isLoading=!0,this.dataSubscription$=this.authService.register(this.form.value).pipe(k(e=>{e.ok&&(localStorage.setItem("token",e.token),this.router.navigateByUrl("/alexpress/home"),this.isLoading=!1)})).subscribe({next:e=>{this.toastr.success(e.message),this.authService.token=e.token,this.isLoading=!1},error:e=>{y(e,this.toastr),this.isLoading=!1}})}validateField(e){return this.form.get(e)?.touched&&!this.form.get(e)?.valid?"border-2 border-red-500":"border-black"}showPass(){this.isVisible=!this.isVisible}randomizedAccount(){let e="",r="ABCDEFGHIJKLMNOPQRSTVWXYZabcdefghiklmnopqrstvwxyz123456789",i=r.length;for(let b=0;b<5;b++)e+=r.charAt(Math.floor(Math.random()*i));let l=["example.com","test.com","mail.com"],x=l[Math.floor(Math.random()*l.length)],P=`${e}${Math.floor(Math.random()*100)}@${x}`,w="",$=8;for(let b=0;b<$;b++)w+=r.charAt(Math.floor(Math.random()*i));this.form.get("username")?.setValue(e),this.form.get("email")?.setValue(P),this.form.get("password")?.setValue(w),this.form.get("email")?.updateValueAndValidity()}constructor(e,r,i,l,x){this.fb=e,this.toastr=r,this.authService=i,this.router=l,this.cdr=x,this.emailValidator="^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\\.[a-zA-Z]{2,}$",this.isLoading=!1,this.form=this.fb.group({username:[null,g.required],email:[null,[g.required,g.pattern(this.emailValidator)]],password:[null,[g.required]]}),this.isVisible=!1,this.theme=localStorage.getItem("color-theme")}ngOnDestroy(){this.dataSubscription$?.unsubscribe()}};t.\u0275fac=function(r){return new(r||t)(p(z),p(V),p(F),p(N),p(Z))},t.\u0275cmp=v({type:t,selectors:[["app-register"]],decls:27,vars:14,consts:[[1,"flex","flex-col","justify-center","items-center","gap-2"],["src","/alexpress-page/assets/templates/logos/dark-mode-logo.png","alt","logo",1,"w-28","h-28","mt-10","m-auto","md:mt-0","lg:mt-5"],["routerLink","/alexpress/home",1,"text-sm","x:text-base","font-bold","bg-cyan-300","border-2","border-cyan-400","w-max","text-black","rounded-xl","px-2","text-center","cursor-pointer","hover:shadow-inner","hover:shadow-black","transition","ease-in-out","duration-300"],[1,"text-sm","x:text-base","font-bold","select-none","bg-white","border-2","border-gray-400","w-max","text-black","rounded-xl","px-2","text-center","cursor-pointer","hover:shadow-inner","hover:shadow-black","transition","ease-in-out","duration-300",3,"click"],[1,"flex","justify-evenly","mx-6","md:mx-auto","items-center","rounded-2xl","bg-gray-100","dark:bg-gray-950","mt-6","py-6","md:py-5","shadow-[0px_6px_7px_3px_#00000024]","max-w-[720px]"],[1,"text-3xl","text-black","font-bold","dark:text-white"],[1,"text-gray-400","mb-4","x:text-xl","lg:mt-2","dark:text-white"],[1,"flex","flex-col","items-center",3,"submit","formGroup"],["formControlName","username","maxlength","20","type","text","placeholder","Username",1,"p-2","font-semibold","dark:bg-gray-600","dark:text-white","border-2","mb-2","w-64","x:w-80","rounded-xl","outline-none"],["formControlName","email","maxlength","60","type","email","placeholder","Email",1,"p-2","font-semibold","dark:bg-gray-600","dark:text-white","border-2","mb-2","w-64","x:w-80","rounded-xl","outline-none"],[1,"relative"],["formControlName","password","type","password","placeholder","Password",1,"border-2","font-semibold","dark:bg-gray-600","dark:text-white","p-2","w-64","x:w-80","rounded-xl","outline-none",3,"type"],[1,"cursor-pointer","absolute","bottom-3","right-3","dark:text-white",3,"click"],[1,"inline-block","bg-cyan-300","w-[40%]","py-1","px-4","mt-5","font-semibold","rounded-2xl","x:w-[80%]","lg:w-full","lg:text-xl","hover:shadow-inner","hover:shadow-black","transition","ease-in-out","duration-300",3,"ngClass"],["class","fa fa-spinner animate-spin",4,"ngIf"],[1,"font-medium","mt-4","text-center","x:mt-7","dark:text-white"],["routerLink","/auth/login",1,"underline","decoration-2"],[1,"hidden","md:block"],["src","/alexpress-page/assets/images/small-shopping-cart-blue-space-space-text_185193-1490.jpg","alt","image",1,"w-64","h-72","object-cover","rounded-2xl"],[1,"fa","fa-spinner","animate-spin"]],template:function(r,i){r&1&&(a(0,"div",0),d(1,"img",1),a(2,"p",2),s(3,"Click here to go ahead with no account"),n(),a(4,"p",3),f("click",function(){return i.randomizedAccount()}),s(5,"Random account (email features not available)"),n()(),a(6,"div",4)(7,"div")(8,"h1",5),s(9,"Register"),n(),a(10,"p",6),s(11,"Type your credentials to register"),n(),a(12,"form",7),f("submit",function(){return i.register()}),d(13,"input",8)(14,"input",9),a(15,"div",10),d(16,"input",11),a(17,"i",12),f("click",function(){return i.showPass()}),n()(),a(18,"button",13),s(19,"Register "),M(20,me,1,0,"i",14),n()(),a(21,"p",15),s(22,"Already have an account? "),a(23,"a",16),s(24,"Login here"),n()()(),a(25,"div",17),d(26,"img",18),n()()),r&2&&(m(12),u("formGroup",i.form),m(),h(i.validateField("username")),m(),h(i.validateField("email")),m(2),h(i.validateField("password")),u("type",i.isVisible?"text":"password"),m(),h(i.isVisible?"fa fa-eye":"fa fa-eye-slash"),m(),u("ngClass",_(12,le,i.isLoading)),m(2),u("ngIf",i.isLoading))},dependencies:[L,I,D,A,E,j,K,T,G,R]});let o=t;return o})();var te=(()=>{let t=class t{};t.\u0275fac=function(r){return new(r||t)},t.\u0275cmp=v({type:t,selectors:[["app-main-auth"]],decls:1,vars:0,template:function(r,i){r&1&&d(0,"router-outlet")},dependencies:[J],encapsulation:2});let o=t;return o})();var de=[{path:"",component:te,children:[{path:"login",component:Y},{path:"register",component:ee},{path:"**",redirectTo:"login"}]}],O=(()=>{let t=class t{};t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=C({type:t}),t.\u0275inj=S({imports:[q.forChild(de),q]});let o=t;return o})();var je=(()=>{let t=class t{};t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=C({type:t}),t.\u0275inj=S({imports:[U,Q,O,W,O]});let o=t;return o})();export{je as AuthModule};
